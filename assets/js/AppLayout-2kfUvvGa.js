import{u as w,_ as I}from"./index-D3K7zYPa.js";import{b as V,c as L,d as R,e as D,f as N,g as z,h as q,i as T,j,k as F,l as H}from"./vendor-element-C6wuX9js.js";import{q as b,r as O,b5 as C,E as Q,R as g,S as i,b6 as M,v as r,t as x,P as E,al as $,af as S,V as k,c as U,W as A,u as _,$ as l,A as v,ar as P,O as y,Q as W}from"./vendor-DsSifUjv.js";import{l as G}from"./login-gVsMNOQO.js";const J=b({__name:"BreadCrumb",setup(n){const p=C(),o=M(),c=O([]),d=p.getRoutes();function f(){c.value=[];let a=o.matched;if(a[0].path==="/"&&(a=a.slice(1)),a.length>0)for(let s=a.length-1;s>=0;s--){const t=a[s];let u=t.path;(s==a.length-1||t.children.length>0)&&(u=""),c.value.unshift({path:u,title:t.meta.title});const e=t.meta.parentPath||"";e&&c.value.unshift(...h(e))}}function h(a,s=[]){var u;const t=d.find(e=>e.path==a);return t&&t.meta&&typeof t.meta.title=="string"&&s.unshift({path:t.path||"",title:t.meta.title}),typeof((u=t==null?void 0:t.meta)==null?void 0:u.parentPath)=="string"?h(t.meta.parentPath,s):s}return Q(()=>o.path,()=>{f()},{immediate:!0}),(a,s)=>{const t=L,u=V;return r(),g(u,null,{default:i(()=>[(r(!0),x(E,null,$(c.value,(e,m)=>(r(),g(t,{key:e.path+m,to:e.path},{default:i(()=>[S(k(e.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),K={class:"app-header-avatar"},X=b({__name:"AppHeader",setup(n){const p=C(),o=w(),c=U(()=>o.userInfo);function d(){o.isExpand=!o.isExpand}function f(){G().finally(()=>{o.setLogout(),p.push("/login")})}return(h,a)=>{const s=I,t=D,u=z,e=N,m=R;return r(),x("div",{class:"app-header",style:A(`left: ${_(o).isExpand?"210px":"64px"};`)},[l(s,{class:"menu-collapse",icon:_(o).isExpand?"fold":"expand",onClick:d},null,8,["icon"]),l(J),l(m,{trigger:"hover"},{dropdown:i(()=>[l(e,null,{default:i(()=>[l(u,{onClick:f},{default:i(()=>[...a[0]||(a[0]=[S("退出",-1)])]),_:1})]),_:1})]),default:i(()=>[v("div",K,[l(t,{src:c.value.avatar,size:32},{default:i(()=>[l(s,{icon:"avatar-filled"})]),_:1},8,["src"]),v("span",null,k(c.value.name),1),l(s,{icon:"arrow-down"})])]),_:1})],4)}}}),Y=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,Z=b({inheritAttrs:!1,__name:"MenuItem",props:{item:{}},setup(n){const p=C();function o(c){p.push(c)}return(c,d)=>{var u;const f=I,h=q,a=P("MenuItem",!0),s=T,t=j;return(u=n.item.meta)!=null&&u.visible?(r(),x(E,{key:0},[n.item.children&&n.item.children.filter(e=>{var m;return(m=e.meta)==null?void 0:m.visible}).length>0?(r(),g(s,{key:0,index:n.item.path||n.item.meta.title},{title:i(()=>{var e,m;return[(e=n.item.meta)!=null&&e.icon?(r(),g(h,{key:0},{default:i(()=>{var B;return[l(f,{icon:(B=n.item.meta)==null?void 0:B.icon},null,8,["icon"])]}),_:1})):y("",!0),v("span",null,k((m=n.item.meta)==null?void 0:m.title),1)]}),default:i(()=>[(r(!0),x(E,null,$(n.item.children,e=>(r(),g(a,{key:e.path,item:e},null,8,["item"]))),128))]),_:1},8,["index"])):(r(),g(t,{key:1,index:n.item.path,onClick:d[0]||(d[0]=e=>o(n.item.path))},{default:i(()=>{var e,m;return[(e=n.item.meta)!=null&&e.icon?(r(),g(h,{key:0},{default:i(()=>[l(f,{icon:n.item.meta.icon},null,8,["icon"])]),_:1})):y("",!0),v("span",null,k((m=n.item.meta)==null?void 0:m.title),1)]}),_:1},8,["index"]))],64)):y("",!0)}}}),ee={class:"app-sider"},te=b({__name:"AppSider",setup(n){const p=M(),o=w();return(c,d)=>{const f=H,h=F;return r(),x("div",ee,[l(h,null,{default:i(()=>[v("div",{class:W(["app-sider-top",_(o).isExpand?"":"is-expand"])},[...d[0]||(d[0]=[v("img",{class:"app-sider-logo",src:Y,alt:""},null,-1),v("span",null,"Vue3企业中台",-1)])],2),l(f,{collapse:!_(o).isExpand,"unique-opened":!0,"default-active":String(_(p).meta.activePath||_(p).path||_(p).name)},{default:i(()=>[(r(!0),x(E,null,$(_(o).userMenus,a=>(r(),g(Z,{key:a.path,item:a},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})])}}}),le=b({__name:"AppLayout",setup(n){const p=w();return(o,c)=>{const d=P("router-view");return r(),x(E,null,[l(X),l(te),v("div",{class:"app-main",style:A(`padding-left: ${_(p).isExpand?"210px":"64px"};`)},[l(d,{class:"app-view"})],4)],64)}}});export{le as default};
