import{u as w,_ as M}from"./index-fxHZISfe.js";import{b as V,c as D,d as L,e as R,f as z,g as N,h as q,i as T,j as U,k as j,l as F}from"./vendor-element-C4f1HHBe.js";import{q as E,r as H,b7 as C,D as O,Q as g,R as i,b8 as $,v as r,t as x,O as b,al as B,af as P,U as k,c as Q,V as S,u as _,_ as l,z as v,ar as A,M as y,P as G}from"./vendor-ByBRGj3b.js";import{l as J}from"./login-CfwkEsIl.js";const K=E({__name:"BreadCrumb",setup(n){const p=C(),o=$(),c=H([]),d=p.getRoutes();function f(){c.value=[];let a=o.matched;if(a[0].path==="/"&&(a=a.slice(1)),a.length>0)for(let s=a.length-1;s>=0;s--){const t=a[s];let u=t.path;(s==a.length-1||t.children.length>0)&&(u=""),c.value.unshift({path:u,title:t.meta.title});const e=t.meta.parentPath||"";e&&c.value.unshift(...h(e))}}function h(a,s=[]){var u;const t=d.find(e=>e.path==a);return t&&t.meta&&typeof t.meta.title=="string"&&s.unshift({path:t.path||"",title:t.meta.title}),typeof((u=t==null?void 0:t.meta)==null?void 0:u.parentPath)=="string"?h(t.meta.parentPath,s):s}return O(()=>o.path,()=>{f()},{immediate:!0}),(a,s)=>{const t=D,u=V;return r(),g(u,null,{default:i(()=>[(r(!0),x(b,null,B(c.value,(e,m)=>(r(),g(t,{key:e.path+m,to:e.path},{default:i(()=>[P(k(e.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),W={class:"app-header-avatar"},X=E({__name:"AppHeader",setup(n){const p=C(),o=w(),c=Q(()=>o.userInfo);function d(){o.isExpand=!o.isExpand}function f(){J().finally(()=>{o.setLogout(),p.push("/login")})}return(h,a)=>{const s=M,t=R,u=N,e=z,m=L;return r(),x("div",{class:"app-header",style:S(`left: ${_(o).isExpand?"210px":"64px"};`)},[l(s,{class:"menu-collapse",icon:_(o).isExpand?"fold":"expand",onClick:d},null,8,["icon"]),l(K),l(m,{trigger:"hover"},{dropdown:i(()=>[l(e,null,{default:i(()=>[l(u,{onClick:f},{default:i(()=>[...a[0]||(a[0]=[P("退出",-1)])]),_:1})]),_:1})]),default:i(()=>[v("div",W,[l(t,{src:c.value.avatar,size:32},{default:i(()=>[l(s,{icon:"avatar-filled"})]),_:1},8,["src"]),v("span",null,k(c.value.name),1),l(s,{icon:"arrow-down"})])]),_:1})],4)}}}),Y=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,Z=E({inheritAttrs:!1,__name:"MenuItem",props:{item:{}},setup(n){const p=C();function o(c){p.push(c)}return(c,d)=>{var u;const f=M,h=q,a=A("MenuItem",!0),s=T,t=U;return(u=n.item.meta)!=null&&u.visible?(r(),x(b,{key:0},[n.item.children&&n.item.children.filter(e=>{var m;return(m=e.meta)==null?void 0:m.visible}).length>0?(r(),g(s,{key:0,index:n.item.path||n.item.meta.title},{title:i(()=>{var e,m;return[(e=n.item.meta)!=null&&e.icon?(r(),g(h,{key:0},{default:i(()=>{var I;return[l(f,{icon:(I=n.item.meta)==null?void 0:I.icon},null,8,["icon"])]}),_:1})):y("",!0),v("span",null,k((m=n.item.meta)==null?void 0:m.title),1)]}),default:i(()=>[(r(!0),x(b,null,B(n.item.children,e=>(r(),g(a,{key:e.path,item:e},null,8,["item"]))),128))]),_:1},8,["index"])):(r(),g(t,{key:1,index:n.item.path,onClick:d[0]||(d[0]=e=>o(n.item.path))},{default:i(()=>{var e,m;return[(e=n.item.meta)!=null&&e.icon?(r(),g(h,{key:0},{default:i(()=>[l(f,{icon:n.item.meta.icon},null,8,["icon"])]),_:1})):y("",!0),v("span",null,k((m=n.item.meta)==null?void 0:m.title),1)]}),_:1},8,["index"]))],64)):y("",!0)}}}),ee={class:"app-sider"},te=E({__name:"AppSider",setup(n){const p=$(),o=w();return(c,d)=>{const f=F,h=j;return r(),x("div",ee,[l(h,null,{default:i(()=>[v("div",{class:G(["app-sider-top",_(o).isExpand?"":"is-expand"])},[...d[0]||(d[0]=[v("img",{class:"app-sider-logo",src:Y,alt:""},null,-1),v("span",null,"Vue3企业中台",-1)])],2),l(f,{collapse:!_(o).isExpand,"unique-opened":!0,"default-active":String(_(p).meta.activePath||_(p).path||_(p).name)},{default:i(()=>[(r(!0),x(b,null,B(_(o).userMenus,a=>(r(),g(Z,{key:a.path,item:a},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})])}}}),le=E({__name:"AppLayout",setup(n){const p=w();return(o,c)=>{const d=A("router-view");return r(),x(b,null,[l(X),l(te),v("div",{class:"app-main",style:S(`padding-left: ${_(p).isExpand?"210px":"64px"};`)},[l(d,{class:"app-view"})],4)],64)}}});export{le as default};
