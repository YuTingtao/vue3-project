import{u as B,_ as P}from"./index-DYa1ZiAK.js";import{b as R,c as z,d as N,e as q,f as T,g as U,h as j,i as F,j as H,k as O,l as Q}from"./vendor-element-CHwYnmAU.js";import{q as y,r as G,b7 as I,D as J,Q as g,R as r,b8 as S,v as l,t as x,O as k,al as M,af as A,U as w,c as V,V as D,u as h,_ as s,z as v,ar as L,M as C,P as K}from"./vendor-DhfBk_Fo.js";import{l as W}from"./login-3dr2Avjk.js";const X=y({__name:"BreadCrumb",setup(n){const c=I(),a=S(),i=G([]),d=c.getRoutes();function m(){i.value=[];let e=a.matched;if(e[0].path==="/"&&(e=e.slice(1)),e.length>0)for(let o=e.length-1;o>=0;o--){const t=e[o];let p=t.path;(o==e.length-1||t.children.length>0)&&(p=""),i.value.unshift({path:p,title:t.meta.title});const u=t.meta.parentPath||"";u&&i.value.unshift(..._(u))}}function _(e,o=[]){var p;const t=d.find(u=>u.path==e);return t&&t.meta&&typeof t.meta.title=="string"&&o.unshift({path:t.path||"",title:t.meta.title}),typeof((p=t==null?void 0:t.meta)==null?void 0:p.parentPath)=="string"?_(t.meta.parentPath,o):o}return J(()=>a.path,()=>{m()},{immediate:!0}),(e,o)=>{const t=z,p=R;return l(),g(p,null,{default:r(()=>[(l(!0),x(k,null,M(i.value,(u,E)=>(l(),g(t,{key:u.path+E,to:u.path},{default:r(()=>[A(w(u.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),Y={class:"app-header-avatar"},Z=y({__name:"AppHeader",setup(n){const c=I(),a=B(),i=V(()=>a.userInfo);function d(){a.isExpand=!a.isExpand}function m(){W().finally(()=>{a.setLogout(),c.push("/login")})}return(_,e)=>{const o=P,t=q,p=U,u=T,E=N;return l(),x("div",{class:"app-header",style:D(`left: ${h(a).isExpand?"210px":"64px"};`)},[s(o,{class:"menu-collapse",icon:h(a).isExpand?"fold":"expand",onClick:d},null,8,["icon"]),s(X),s(E,{trigger:"hover"},{dropdown:r(()=>[s(u,null,{default:r(()=>[s(p,{onClick:m},{default:r(()=>[...e[0]||(e[0]=[A("退出",-1)])]),_:1})]),_:1})]),default:r(()=>[v("div",Y,[s(t,{src:i.value.avatar,size:32},{default:r(()=>[s(o,{icon:"avatar-filled"})]),_:1},8,["src"]),v("span",null,w(i.value.name),1),s(o,{icon:"arrow-down"})])]),_:1})],4)}}}),ee=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,te=y({inheritAttrs:!1,__name:"MenuItem",props:{item:{}},setup(n){const c=I(),a=n,i=V(()=>{var m;return((m=a.item.children)==null?void 0:m.filter(_=>{var e;return((e=_.meta)==null?void 0:e.hidden)!==0}))||[]});function d(m){c.push(m)}return(m,_)=>{var E;const e=P,o=j,t=L("MenuItem",!0),p=F,u=H;return((E=n.item.meta)==null?void 0:E.hidden)!==0?(l(),x(k,{key:0},[i.value.length>0?(l(),g(p,{key:0,index:n.item.name||n.item.path},{title:r(()=>{var f,b;return[(f=n.item.meta)!=null&&f.icon?(l(),g(o,{key:0},{default:r(()=>{var $;return[s(e,{icon:($=n.item.meta)==null?void 0:$.icon},null,8,["icon"])]}),_:1})):C("",!0),v("span",null,w((b=n.item.meta)==null?void 0:b.title),1)]}),default:r(()=>[(l(!0),x(k,null,M(i.value,f=>(l(),g(t,{key:f.path,item:f},null,8,["item"]))),128))]),_:1},8,["index"])):(l(),g(u,{key:1,index:n.item.path,onClick:_[0]||(_[0]=f=>d(n.item.name||n.item.path))},{default:r(()=>{var f,b;return[(f=n.item.meta)!=null&&f.icon?(l(),g(o,{key:0},{default:r(()=>[s(e,{icon:n.item.meta.icon},null,8,["icon"])]),_:1})):C("",!0),v("span",null,w((b=n.item.meta)==null?void 0:b.title),1)]}),_:1},8,["index"]))],64)):C("",!0)}}}),ne={class:"app-sider"},ae=y({__name:"AppSider",setup(n){const c=S(),a=B();return(i,d)=>{const m=Q,_=O;return l(),x("div",ne,[s(_,null,{default:r(()=>[v("div",{class:K(["app-sider-top",h(a).isExpand?"":"is-expand"])},[...d[0]||(d[0]=[v("img",{class:"app-sider-logo",src:ee,alt:""},null,-1),v("span",null,"Vue3企业中台",-1)])],2),s(m,{collapse:!h(a).isExpand,"unique-opened":!0,"default-active":String(h(c).meta.activePath||h(c).path||h(c).name)},{default:r(()=>[(l(!0),x(k,null,M(h(a).userMenus,e=>(l(),g(te,{key:e.path,item:e},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})])}}}),ie=y({__name:"AppLayout",setup(n){const c=B();return(a,i)=>{const d=L("router-view");return l(),x(k,null,[s(Z),s(ae),v("div",{class:"app-main",style:D(`padding-left: ${h(c).isExpand?"210px":"64px"};`)},[s(d,{class:"app-view"})],4)],64)}}});export{ie as default};
