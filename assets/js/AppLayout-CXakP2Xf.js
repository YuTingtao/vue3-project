import{u as w,_ as I}from"./index-BkD2uFFR.js";import{b as L,c as N,d as R,e as D,f as z,g as q,h as T,i as j,j as F,k as H,l as O}from"./vendor-element-C6wuX9js.js";import{q as b,r as Q,b5 as C,E as U,R as h,S as i,b6 as M,v as r,t as x,P as E,al as $,af as S,V as k,c as A,W as P,u as v,$ as l,A as g,ar as V,O as y,Q as W}from"./vendor-DsSifUjv.js";import{l as G}from"./login-B-0pAmSZ.js";const J=b({__name:"BreadCrumb",setup(n){const p=C(),s=M(),u=Q([]),d=p.getRoutes();function _(){u.value=[];let o=s.matched;if(o[0].path==="/"&&(o=o.slice(1)),o.length>0)for(let a=o.length-1;a>=0;a--){const t=o[a];let c=t.path;(a==o.length-1||t.children.length>0)&&(c=""),u.value.unshift({path:c,title:t.meta.title});const e=t.meta.parentPath||"";e&&u.value.unshift(...f(e))}}function f(o,a=[]){var c;const t=d.find(e=>e.path==o);return t&&t.meta&&typeof t.meta.title=="string"&&a.unshift({path:t.path||"",title:t.meta.title}),typeof((c=t==null?void 0:t.meta)==null?void 0:c.parentPath)=="string"?f(t.meta.parentPath,a):a}return U(()=>s.path,()=>{_()},{immediate:!0}),(o,a)=>{const t=N,c=L;return r(),h(c,null,{default:i(()=>[(r(!0),x(E,null,$(u.value,(e,m)=>(r(),h(t,{key:e.path+m,to:e.path},{default:i(()=>[S(k(e.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),K={class:"app-header-avatar"},X=b({__name:"AppHeader",setup(n){const p=C(),s=w(),u=A(()=>s.userInfo);function d(){s.isExpand=!s.isExpand}function _(){G().finally(()=>{s.setLogout(),p.push("/login")})}return(f,o)=>{const a=I,t=D,c=q,e=z,m=R;return r(),x("div",{class:"app-header",style:P(`left: ${v(s).isExpand?"210px":"64px"};`)},[l(a,{class:"menu-collapse",icon:v(s).isExpand?"fold":"expand",onClick:d},null,8,["icon"]),l(J),l(m,{trigger:"hover"},{dropdown:i(()=>[l(e,null,{default:i(()=>[l(c,{onClick:_},{default:i(()=>[...o[0]||(o[0]=[S("退出",-1)])]),_:1})]),_:1})]),default:i(()=>[g("div",K,[l(t,{src:u.value.avatar,size:32},{default:i(()=>[l(a,{icon:"avatar-filled"})]),_:1},8,["src"]),g("span",null,k(u.value.userName),1),l(a,{icon:"arrow-down"})])]),_:1})],4)}}}),Y=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,Z=b({inheritAttrs:!1,__name:"MenuItem",props:{item:{}},setup(n){const p=C();function s(u){p.push(u)}return(u,d)=>{var c;const _=I,f=T,o=V("MenuItem",!0),a=j,t=F;return(c=n.item.meta)!=null&&c.visible?(r(),x(E,{key:0},[n.item.children&&n.item.children.filter(e=>{var m;return(m=e.meta)==null?void 0:m.visible}).length>0?(r(),h(a,{key:0,index:n.item.path||n.item.meta.title},{title:i(()=>{var e,m;return[(e=n.item.meta)!=null&&e.icon?(r(),h(f,{key:0},{default:i(()=>{var B;return[l(_,{icon:(B=n.item.meta)==null?void 0:B.icon},null,8,["icon"])]}),_:1})):y("",!0),g("span",null,k((m=n.item.meta)==null?void 0:m.title),1)]}),default:i(()=>[(r(!0),x(E,null,$(n.item.children,e=>(r(),h(o,{key:e.path,item:e},null,8,["item"]))),128))]),_:1},8,["index"])):(r(),h(t,{key:1,index:n.item.path,onClick:d[0]||(d[0]=e=>s(n.item.path))},{default:i(()=>{var e,m;return[(e=n.item.meta)!=null&&e.icon?(r(),h(f,{key:0},{default:i(()=>[l(_,{icon:n.item.meta.icon},null,8,["icon"])]),_:1})):y("",!0),g("span",null,k((m=n.item.meta)==null?void 0:m.title),1)]}),_:1},8,["index"]))],64)):y("",!0)}}}),ee={class:"app-sider"},te=b({__name:"AppSider",setup(n){const p=M(),s=w(),u=A(()=>s.userMenus);return(d,_)=>{const f=O,o=H;return r(),x("div",ee,[l(o,null,{default:i(()=>[g("div",{class:W(["app-sider-top",v(s).isExpand?"":"is-expand"])},[..._[0]||(_[0]=[g("img",{class:"app-sider-logo",src:Y,alt:""},null,-1),g("span",null,"Vue3企业中台",-1)])],2),l(f,{collapse:!v(s).isExpand,"unique-opened":!0,"default-active":String(v(p).meta.activePath||v(p).path||v(p).name)},{default:i(()=>[(r(!0),x(E,null,$(u.value,a=>(r(),h(Z,{key:a.path,item:a},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})])}}}),le=b({__name:"AppLayout",setup(n){const p=w();return(s,u)=>{const d=V("router-view");return r(),x(E,null,[l(X),l(te),g("div",{class:"app-main",style:P(`padding-left: ${v(p).isExpand?"210px":"64px"};`)},[l(d,{class:"app-view"})],4)],64)}}});export{le as default};
