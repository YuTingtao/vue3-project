import{b as z,c as j,d as q,e as O,f as T,g as F,h as Q,i as U,j as W,k as G,l as H}from"./vendor-element-BzzKxJwQ.js";import{_ as M,u as J}from"./index-D67ZptqC.js";import{b5 as k,ar as P,t as v,O as y,v as i,R as d,S as l,P as x,al as w,A as c,$ as s,V as b,q as S,r as K,E as X,b6 as $,af as V,c as B,u as p,W as I,Q as Y}from"./vendor-DE5bXR-B.js";import{l as Z}from"./login-BV8sZ7f9.js";const ee=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,te={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(a){const g=k();function m(t){g.push(t)}return(t,_)=>{const h=M,f=z,o=P("MenuItem",!0),u=j,e=q;return a.item.meta.visible?(i(),v(x,{key:0},[a.item.children&&a.item.children.filter(n=>n.meta.visible).length>0?(i(),d(u,{key:0,index:a.item.path||a.item.meta.title},{title:l(()=>[a.item.meta.icon?(i(),d(f,{key:0},{default:l(()=>[s(h,{icon:a.item.meta.icon},null,8,["icon"])]),_:1})):y("",!0),c("span",null,b(a.item.meta.title),1)]),default:l(()=>[(i(!0),v(x,null,w(a.item.children,n=>(i(),d(o,{key:n.path,item:n},null,8,["item"]))),128))]),_:1},8,["index"])):(i(),d(e,{key:1,index:a.item.path,onClick:_[0]||(_[0]=n=>m(a.item.path))},{default:l(()=>[a.item.meta.icon?(i(),d(f,{key:0},{default:l(()=>[s(h,{icon:a.item.meta.icon},null,8,["icon"])]),_:1})):y("",!0),c("span",null,b(a.item.meta.title),1)]),_:1},8,["index"]))],64)):y("",!0)}}},ne=S({__name:"BreadCrumb",setup(a){const g=k(),m=$(),t=K([]),_=g.getRoutes();function h(){t.value=[];let o=m.matched;if(o[0].path==="/"&&(o=o.slice(1)),o.length>0)for(let u=o.length-1;u>=0;u--){const e=o[u];let n=e.path;(u==o.length-1||e.children.length>0)&&(n=""),t.value.unshift({path:n,title:e.meta.title});const r=e.meta.parentPath||"";r&&t.value.unshift(...f(r))}}function f(o,u=[]){var n;const e=_.find(r=>r.path==o);return e&&e.meta&&typeof e.meta.title=="string"&&u.unshift({path:e.path||"",title:e.meta.title}),typeof((n=e==null?void 0:e.meta)==null?void 0:n.parentPath)=="string"?f(e.meta.parentPath,u):u}return X(()=>m.path,()=>{h()},{immediate:!0}),(o,u)=>{const e=T,n=O;return i(),d(n,null,{default:l(()=>[(i(!0),v(x,null,w(t.value,(r,E)=>(i(),d(e,{key:r.path+E,to:r.path},{default:l(()=>[V(b(r.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),ae={class:"app-avatar-dropdown"},oe={class:"app-aside"},re=S({__name:"AppLayout",setup(a){const g=k(),m=$(),t=J(),_=B(()=>t.userInfo),h=B(()=>t.userMenus);function f(){t.isExpand=!t.isExpand}function o(){Z().finally(()=>{t.setLogout(),g.push("/login")})}return(u,e)=>{const n=M,r=U,E=G,L=W,N=F,R=H,A=Q,D=P("router-view");return i(),v(x,null,[c("div",{class:"app-head",style:I(`left: ${p(t).isExpand?"210px":"64px"};`)},[s(n,{class:"menu-collapse",icon:p(t).isExpand?"fold":"expand",onClick:f},null,8,["icon"]),s(ne),s(N,{trigger:"hover"},{dropdown:l(()=>[s(L,null,{default:l(()=>[s(E,{onClick:o},{default:l(()=>[...e[0]||(e[0]=[V("退出",-1)])]),_:1})]),_:1})]),default:l(()=>[c("div",ae,[s(r,{src:_.value.avatar,size:32},{default:l(()=>[s(n,{icon:"avatar-filled"})]),_:1},8,["src"]),c("span",null,b(_.value.userName),1),s(n,{icon:"arrow-down"})])]),_:1})],4),c("div",oe,[s(A,null,{default:l(()=>[c("div",{class:Y(["app-logo",p(t).isExpand?"":"collapsed"])},[...e[1]||(e[1]=[c("img",{class:"app-logo-img",src:ee,alt:""},null,-1),c("span",null,"Vue3管理后台",-1)])],2),s(R,{collapse:!p(t).isExpand,"unique-opened":!0,"default-active":String(p(m).meta.activePath||p(m).path||p(m).name)},{default:l(()=>[(i(!0),v(x,null,w(h.value,C=>(i(),d(te,{key:C.path,item:C},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),c("div",{class:"app-main",style:I(`padding-left: ${p(t).isExpand?"210px":"64px"};`)},[s(D,{class:"app-view"})],4)],64)}}});export{re as default};
