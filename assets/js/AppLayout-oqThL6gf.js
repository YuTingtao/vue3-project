import{b as j,c as q,d as O,e as T,f as F,g as Q,h as U,i as W,j as G,k as H,l as J}from"./vendor-element--HxPAMq8.js";import{_ as I,u as K}from"./index-CtG5b70v.js";import{a$ as X,b5 as k,ar as M,t as v,O as y,v as u,R as _,S as o,P as x,al as w,A as m,$ as s,V as E,q as $,r as Y,E as Z,af as P,b6 as V,c as C,u as d,W as B,Q as ee}from"./vendor-zZGLt2kn.js";import{l as te}from"./login-B4Cwm9UY.js";const ne=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,ae=X("appStore",{state:()=>({menu:{isExpand:!0}}),getters:{},actions:{},persist:{key:"appStore",storage:localStorage}}),oe={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(n){const g=k();function p(c){g.push(c)}return(c,i)=>{const f=I,h=j,a=M("MenuItem",!0),l=q,e=O;return n.item.meta.visible?(u(),v(x,{key:0},[n.item.children&&n.item.children.filter(t=>t.meta.visible).length>0?(u(),_(l,{key:0,index:n.item.path||n.item.meta.title},{title:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{icon:n.item.meta.icon},null,8,["icon"])]),_:1})):y("",!0),m("span",null,E(n.item.meta.title),1)]),default:o(()=>[(u(!0),v(x,null,w(n.item.children,t=>(u(),_(a,{key:t.path,item:t},null,8,["item"]))),128))]),_:1},8,["index"])):(u(),_(e,{key:1,index:n.item.path,onClick:i[0]||(i[0]=t=>p(n.item.path))},{default:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{icon:n.item.meta.icon},null,8,["icon"])]),_:1})):y("",!0),m("span",null,E(n.item.meta.title),1)]),_:1},8,["index"]))],64)):y("",!0)}}},le=$({__name:"BreadCrumb",setup(n){const g=k(),p=V(),c=Y([]),i=g.getRoutes();function f(){c.value=[];let a=p.matched;if(a[0].path==="/"&&(a=a.slice(1)),a.length>0)for(let l=a.length-1;l>=0;l--){const e=a[l];let t=e.path;(l==a.length-1||e.children.length>0)&&(t=""),c.value.unshift({path:t,title:e.meta.title});const r=e.meta.parentPath||"";r&&c.value.unshift(...h(r))}}function h(a,l=[]){var t;const e=i.find(r=>r.path==a);return e&&e.meta&&typeof e.meta.title=="string"&&l.unshift({path:e.path||"",title:e.meta.title}),typeof((t=e==null?void 0:e.meta)==null?void 0:t.parentPath)=="string"?h(e.meta.parentPath,l):l}return Z(()=>p.path,()=>{f()},{immediate:!0}),(a,l)=>{const e=F,t=T;return u(),_(t,null,{default:o(()=>[(u(!0),v(x,null,w(c.value,(r,b)=>(u(),_(e,{key:r.path+b,to:r.path},{default:o(()=>[P(E(r.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),se={class:"app-avatar-dropdown"},ue={class:"app-aside"},pe=$({__name:"AppLayout",setup(n){const g=k(),p=V(),c=K(),i=ae(),f=C(()=>c.userInfo),h=C(()=>c.userMenus);function a(){i.menu.isExpand=!i.menu.isExpand}function l(){te().finally(()=>{c.setLogout(),g.push("/login")})}return(e,t)=>{const r=I,b=W,A=H,L=G,N=Q,R=J,D=U,z=M("router-view");return u(),v(x,null,[m("div",{class:"app-head",style:B(`left: ${d(i).menu.isExpand?"210px":"64px"};`)},[s(r,{class:"menu-collapse",icon:d(i).menu.isExpand?"fold":"expand",onClick:a},null,8,["icon"]),s(le),s(N,{trigger:"hover"},{dropdown:o(()=>[s(L,null,{default:o(()=>[s(A,{onClick:l},{default:o(()=>[...t[0]||(t[0]=[P("退出",-1)])]),_:1})]),_:1})]),default:o(()=>[m("div",se,[s(b,{src:f.value.avatar,size:32},{default:o(()=>[s(r,{icon:"avatar-filled"})]),_:1},8,["src"]),m("span",null,E(f.value.userName),1),s(r,{icon:"arrow-down"})])]),_:1})],4),m("div",ue,[s(D,null,{default:o(()=>[m("div",{class:ee(["app-logo",d(i).menu.isExpand?"":"collapsed"])},[...t[1]||(t[1]=[m("img",{class:"app-logo-img",src:ne,alt:""},null,-1),m("span",null,"Vue3管理后台",-1)])],2),s(R,{collapse:!d(i).menu.isExpand,"unique-opened":!0,"default-active":String(d(p).meta.activePath||d(p).path||d(p).name)},{default:o(()=>[(u(!0),v(x,null,w(h.value,S=>(u(),_(oe,{key:S.path,item:S},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),m("div",{class:"app-main",style:B(`padding-left: ${d(i).menu.isExpand?"210px":"64px"};`)},[s(z,{class:"app-view"})],4)],64)}}});export{pe as default};
