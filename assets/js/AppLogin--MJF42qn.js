import{m as V,n as x,o as k,p as q}from"./vendor-element-C4f1HHBe.js";import{u as E,_ as R}from"./index-fxHZISfe.js";import{q as B,r as c,$ as S,t as A,z as g,_ as o,R as a,af as C,b9 as F,b8 as I,b7 as L,v as N}from"./vendor-ByBRGj3b.js";import{a as U}from"./login-CfwkEsIl.js";import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";const z={class:"login-page"},$={class:"login-box"},M=B({__name:"AppLogin",setup(T){const p=L(),d=I(),m=E(),_=c(),t=c({account:"admin",password:"123456"}),v=S({account:[{required:!0,message:"请输入账号/手机号/邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),n=c(!1);async function w(){var l;await((l=_.value)==null?void 0:l.validate(e=>{if(n.value||!e)return;n.value=!0;const s={...t.value};s.password=F(s.password).toString(),U(s).then(r=>{r.code===200&&f()}).catch(r=>{f()}).finally(()=>{n.value=!1})}))}async function f(){m.setLogin({id:1,token:"token-123456789",name:"admin",avatar:""}),await m.getUserMenus(),d.query.redirect?p.replace(d.query.redirect):p.replace("/")}return(l,e)=>{const s=R,r=k,u=x,b=q,y=V;return N(),A("div",z,[g("div",$,[e[3]||(e[3]=g("h3",{class:"title"},"欢迎登录",-1)),o(y,{model:t.value,ref_key:"formRef",ref:_,rules:v,size:"large"},{default:a(()=>[o(u,{label:"",prop:"account"},{default:a(()=>[o(r,{modelValue:t.value.account,"onUpdate:modelValue":e[0]||(e[0]=i=>t.value.account=i),placeholder:"请输入账号/手机号/邮箱"},{prefix:a(()=>[o(s,{icon:"user"})]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"",prop:"password"},{default:a(()=>[o(r,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=i=>t.value.password=i),placeholder:"请输入密码",type:"password"},{prefix:a(()=>[o(s,{icon:"lock"})]),_:1},8,["modelValue"])]),_:1}),o(u,null,{default:a(()=>[o(b,{class:"row-btn",type:"primary",loading:n.value,onClick:w},{default:a(()=>[...e[2]||(e[2]=[C(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])}}}),K=h(M,[["__scopeId","data-v-3a59c983"]]);export{K as default};
