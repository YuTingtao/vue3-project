import{m as V,n as x,o as k,p as q}from"./vendor-element-C6wuX9js.js";import{u as E,_ as S}from"./index-D3K7zYPa.js";import{q as A,r as c,a0 as B,t as R,A as g,$ as o,S as a,af as C,b7 as F,b6 as I,b5 as L,v as N}from"./vendor-DsSifUjv.js";import{a as U}from"./login-gVsMNOQO.js";import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";const $={class:"login-page"},z={class:"login-box"},M=A({__name:"AppLogin",setup(T){const p=L(),d=I(),m=E(),f=c(),t=c({account:"admin",password:"123456"}),v=B({account:[{required:!0,message:"请输入账号/手机号/邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),n=c(!1);async function w(){var l;await((l=f.value)==null?void 0:l.validate(e=>{if(n.value||!e)return;n.value=!0;const s={...t.value};s.password=F(s.password).toString(),U(s).then(r=>{r.code===200&&_()}).catch(r=>{_()}).finally(()=>{n.value=!1})}))}async function _(){m.setLogin({id:1,token:"token-123456789",name:"admin",avatar:""}),await m.getUserMenus(),d.query.redirect?p.replace(d.query.redirect):p.replace("/")}return(l,e)=>{const s=S,r=k,u=x,b=q,y=V;return N(),R("div",$,[g("div",z,[e[3]||(e[3]=g("h3",{class:"title"},"欢迎登录",-1)),o(y,{model:t.value,ref_key:"formRef",ref:f,rules:v,size:"large"},{default:a(()=>[o(u,{label:"",prop:"account"},{default:a(()=>[o(r,{modelValue:t.value.account,"onUpdate:modelValue":e[0]||(e[0]=i=>t.value.account=i),placeholder:"请输入账号/手机号/邮箱"},{prefix:a(()=>[o(s,{icon:"user"})]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"",prop:"password"},{default:a(()=>[o(r,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=i=>t.value.password=i),placeholder:"请输入密码",type:"password"},{prefix:a(()=>[o(s,{icon:"lock"})]),_:1},8,["modelValue"])]),_:1}),o(u,null,{default:a(()=>[o(b,{class:"row-btn",type:"primary",loading:n.value,onClick:w},{default:a(()=>[...e[2]||(e[2]=[C(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])}}}),K=h(M,[["__scopeId","data-v-3a59c983"]]);export{K as default};
