var R=Object.defineProperty;var y=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var V=(a,o,e)=>o in a?R(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e,x=(a,o)=>{for(var e in o||(o={}))B.call(o,e)&&V(a,e,o[e]);if(y)for(var e of y(o))S.call(o,e)&&V(a,e,o[e]);return a};var w=(a,o,e)=>new Promise((m,p)=>{var n=s=>{try{l(e.next(s))}catch(i){p(i)}},_=s=>{try{l(e.throw(s))}catch(i){p(i)}},l=s=>s.done?m(s.value):Promise.resolve(s.value).then(n,_);l((e=e.apply(a,o)).next())});import{m as A,n as C,o as F,p as I}from"./vendor-element-rqccVHfb.js";import{u as L,_ as N}from"./index-CMcFrOan.js";import{q as U,r as b,$ as h,t as z,z as k,_ as r,R as u,af as $,b9 as M,b8 as T,b7 as j,v as D}from"./vendor-DhfBk_Fo.js";import{a as G}from"./login-D9YbeXjb.js";import{_ as H}from"./plugin-vue_export-helper-DlAUqK2U.js";const J={class:"login-page"},K={class:"login-box"},O=U({__name:"AppLogin",setup(a){const o=j(),e=T(),m=L(),p=b(),n=b({account:"admin",password:"123456"}),_=h({account:[{required:!0,message:"请输入账号/手机号/邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),l=b(!1);function s(){return w(this,null,function*(){var f;yield(f=p.value)==null?void 0:f.validate(t=>{if(l.value||!t)return;l.value=!0;const c=x({},n.value);c.password=M(c.password).toString(),G(c).then(d=>{d.code===200&&i()}).catch(d=>{i()}).finally(()=>{l.value=!1})})})}function i(){return w(this,null,function*(){m.setLogin({id:1,token:"token-123456789",name:"admin",avatar:""}),yield m.getUserMenus(),e.query.redirect?o.replace(e.query.redirect):o.replace("/")})}return(f,t)=>{const c=N,d=F,g=C,q=I,E=A;return D(),z("div",J,[k("div",K,[t[3]||(t[3]=k("h3",{class:"title"},"欢迎登录",-1)),r(E,{model:n.value,ref_key:"formRef",ref:p,rules:_,size:"large"},{default:u(()=>[r(g,{label:"",prop:"account"},{default:u(()=>[r(d,{modelValue:n.value.account,"onUpdate:modelValue":t[0]||(t[0]=v=>n.value.account=v),placeholder:"请输入账号/手机号/邮箱"},{prefix:u(()=>[r(c,{icon:"user"})]),_:1},8,["modelValue"])]),_:1}),r(g,{label:"",prop:"password"},{default:u(()=>[r(d,{modelValue:n.value.password,"onUpdate:modelValue":t[1]||(t[1]=v=>n.value.password=v),placeholder:"请输入密码",type:"password"},{prefix:u(()=>[r(c,{icon:"lock"})]),_:1},8,["modelValue"])]),_:1}),r(g,null,{default:u(()=>[r(q,{class:"row-btn",type:"primary",loading:l.value,onClick:s},{default:u(()=>[...t[2]||(t[2]=[$(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])}}}),ee=H(O,[["__scopeId","data-v-3a59c983"]]);export{ee as default};
