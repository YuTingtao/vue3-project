import{m as V,n as x,o as k,p as q}from"./vendor-element-C6wuX9js.js";import{u as E,_ as S}from"./index-BV0AUJX4.js";import{q as U,r as c,a0 as B,t as N,A as g,$ as o,S as a,af as R,b7 as C,b6 as F,b5 as I,v as L}from"./vendor-DsSifUjv.js";import{a as h}from"./login-BbT7G7uN.js";import{_ as A}from"./plugin-vue_export-helper-DlAUqK2U.js";const T={class:"login-page"},$={class:"login-box"},z=U({__name:"UserLogin",setup(M){const d=I(),p=F(),m=E(),f=c(),t=c({account:"admin",password:"123456"}),v=B({account:[{required:!0,message:"请输入账号/手机号/邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),n=c(!1);async function b(){var l;await((l=f.value)==null?void 0:l.validate(e=>{if(n.value||!e)return;n.value=!0;const s={...t.value};s.password=C(s.password).toString(),h(s).then(r=>{r.code===200&&_()}).catch(r=>{_()}).finally(()=>{n.value=!1})}))}async function _(){m.setLogin({id:1,token:"Token-123456789",userName:"admin",avatar:""}),await m.getUserMenus(),p.query.redirect?d.replace(p.query.redirect):d.replace("/")}return(l,e)=>{const s=S,r=k,u=x,w=q,y=V;return L(),N("div",T,[g("div",$,[e[3]||(e[3]=g("h3",{class:"title"},"欢迎登录",-1)),o(y,{model:t.value,ref_key:"formRef",ref:f,rules:v,size:"large"},{default:a(()=>[o(u,{label:"",prop:"account"},{default:a(()=>[o(r,{modelValue:t.value.account,"onUpdate:modelValue":e[0]||(e[0]=i=>t.value.account=i),placeholder:"请输入账号/手机号/邮箱"},{prefix:a(()=>[o(s,{icon:"user"})]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"",prop:"password"},{default:a(()=>[o(r,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=i=>t.value.password=i),placeholder:"请输入密码",type:"password"},{prefix:a(()=>[o(s,{icon:"lock"})]),_:1},8,["modelValue"])]),_:1}),o(u,null,{default:a(()=>[o(w,{class:"row-btn",type:"primary",loading:n.value,onClick:b},{default:a(()=>[...e[2]||(e[2]=[R(" 登 录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])}}}),K=A(z,[["__scopeId","data-v-ee94bc23"]]);export{K as default};
