import{r as b,o as _,c as k,w as I,a as S,u as v,z as P,E as x,d as C,b as O,e as R,f as B,g as N,h as A,i as V,j as z,k as T,l as D,m as $,n as h}from"./vendor-a129447c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const H={__name:"App",setup(e){return(t,r)=>{const s=b("router-view"),n=x;return _(),k(n,{locale:v(P)},{default:I(()=>[S(s)]),_:1},8,["locale"])}}},q="modulepreload",F=function(e,t){return new URL(e,t).href},g={},u=function(t,r,s){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=F(o,s),o in g)return;g[o]=!0;const i=o.endsWith(".css"),M=i?'[rel="stylesheet"]':"";if(!!s)for(let l=n.length-1;l>=0;l--){const d=n[l];if(d.href===o&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${M}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":q,i||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),i)return new Promise((l,d)=>{a.addEventListener("load",l),a.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};function y(e,t={}){return e.forEach(r=>{if(r.path&&(t[r.path]=r.buttons||[]),r.children&&r.children.length>0)return y(r.children,t)}),t}function w(e,t="/login"){return e&&(t=e.path,e.children&&e.children.length>0)?w(e.children[0],t):t}const U=[{path:"/useCase",name:"useCase",redirect:"",title:"组件案例",icon:"document",hidden:0,buttons:[],children:[{path:"/svgIcon",name:"svgIcon",redirect:"",title:"svg图标",icon:"",hidden:0,buttons:[{name:"add"},{name:"edit"},{name:"delete"}]},{path:"/wangEditor",name:"wangEditor",redirect:"",title:"富文本编辑器",icon:"",hidden:0,buttons:[{name:"add"},{name:"edit"},{name:"delete"}]}]}],E=C("store",{state:()=>({token:"",userInfo:{},userMenus:[]}),getters:{flatMenus:e=>y(e.userMenus),firstMenuPath:e=>w(e.userMenus[0])},actions:{setLogin(e){this.token=e.token,this.userInfo=e.userInfo},setLogout(){this.token="",this.userInfo={}},getUserMenus(){this.userMenus=U}},persist:{enabled:!0,strategies:[{key:"store",storage:sessionStorage}]}});let m;function p(e){if(!m){m=!0,setTimeout(()=>{m=!1},1e3);var t=new XMLHttpRequest;t.open("get","./version.json",!0),t.onreadystatechange=function(){if(t.readyState==4&&t.status==200){var r=JSON.parse(t.responseText);!e&&r.version!=sessionStorage.appVersion&&O.alert("检测到版本有更新，请刷新页面","版本更新提示",{callback:()=>{location.reload(!0)}}),sessionStorage.appVersion=r.version}},t.send()}}const W=[{path:"/",name:"index",component:()=>u(()=>import("./Index-b6ef8c5e.js"),["./Index-b6ef8c5e.js","./vendor-a129447c.js","./vendor-9aaceb77.css","./login-f35774ef.js","./Index-9a1892ce.css"],import.meta.url)},{path:"/useCase",name:"useCase",redirect:"",component:()=>u(()=>import("./Index-b6ef8c5e.js"),["./Index-b6ef8c5e.js","./vendor-a129447c.js","./vendor-9aaceb77.css","./login-f35774ef.js","./Index-9a1892ce.css"],import.meta.url),meta:{},children:[{path:"/svgIcon",name:"svgIcon",redirect:"",component:()=>u(()=>import("./SvgIcon-451b1870.js"),["./SvgIcon-451b1870.js","./vendor-a129447c.js","./vendor-9aaceb77.css","./plugin-vue_export-helper-c27b6911.js","./SvgIcon-b3fcb483.css"],import.meta.url),meta:{}},{path:"/wangEditor",name:"wangEditor",redirect:"",component:()=>u(()=>import("./WangEditor-16eb2706.js"),["./WangEditor-16eb2706.js","./vendor-a129447c.js","./vendor-9aaceb77.css","./WangEditor-2d99613a.css"],import.meta.url),meta:{}}]},{path:"/login",name:"login",component:()=>u(()=>import("./Login-25a6c06e.js"),["./Login-25a6c06e.js","./vendor-a129447c.js","./vendor-9aaceb77.css","./login-f35774ef.js","./plugin-vue_export-helper-c27b6911.js","./Login-15557bfc.css"],import.meta.url)}],f=R({history:B(),routes:W,scrollBehavior(e,t,r){return{top:0}}});f.beforeEach((e,t,r)=>{const s=E(),n=["/login","/404",...Object.keys(s.flatMenus)];!s.token&&e.path!=="/login"?r("/login"):n.includes(e.path)?r():(e.path!="/"&&e.path!="/404"&&N.error("访问地址不存在"),r(s.firstMenuPath))});f.onError(e=>{p()});const L=A();L.use(V);const j=["width","height"],J=["xlink:href","fill"],K={__name:"svgIcon",props:{name:{type:String,required:!0},size:{type:[String,Number],default:"1em"},color:{type:String,default:"currentColor"},prefix:{type:String,default:"icon"}},setup(e){const t=e,r=z(()=>`#${t.prefix}-${t.name}`);return(s,n)=>(_(),T("svg",{class:"svg-icon","aria-hidden":"true",width:e.size,height:e.size},[D("use",{"xlink:href":v(r),rel:"external nofollow",fill:e.color},null,8,J)],8,j))}};if(typeof window<"u"){let e=function(){var t=document.body,r=document.getElementById("svg__icon__dom");r||(r=document.createElementNS("http://www.w3.org/2000/svg","svg"),r.style.position="absolute",r.style.width="0",r.style.height="0",r.id="svg__icon__dom",r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),r.innerHTML='<symbol  viewBox="0 0 1024 1024" id="icon-case"><path d="m49.971 346.317 441.959 255.18c6.553 3.892 13.926 5.735 21.504 5.735 7.372 0 14.745-1.843 21.299-5.734L976.69 346.317c13.312-7.783 21.504-21.504 21.504-37.069s-7.987-29.286-21.504-37.069L534.733 17c-13.107-7.578-29.696-7.578-42.803 0L49.97 272.178c-13.312 7.783-21.299 21.504-21.299 37.069s7.782 29.286 21.3 37.069zM513.23 63.693l425.165 245.555-425.165 245.35-425.165-245.35L513.229 63.693z" /><path d="M954.163 496.64 513.23 751.206 72.499 496.64c-12.288-7.168-27.853-2.867-35.02 9.42-7.169 12.289-2.868 27.854 9.42 35.022l466.535 269.312 466.33-269.312c12.287-7.168 16.383-22.733 9.42-35.021-7.168-12.288-22.938-16.589-35.02-9.421z" /><path d="M954.163 699.392 513.23 953.958 72.499 699.392c-12.288-7.168-27.853-2.867-35.02 9.42-7.169 12.289-2.868 27.854 9.42 35.022l466.535 269.312 466.33-269.312c12.287-7.168 16.383-22.733 9.42-35.021-7.168-12.288-22.938-16.589-35.02-9.421z" /></symbol>',t.insertBefore(r,t.lastChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}const X={mounted(e,t){e.src&&(e.onerror=()=>{e.src=t.value,e.onerror=null})},updated(e,t){e.src&&(e.onerror=()=>{e.src=t.value,e.onerror=null})}},G=f.currentRoute,Q={mounted(e,t){const r=E();if(typeof t.value=="object"){const{path:s,btn:n}=t.value;if(!n)r.flatMenus[s]||e.parentNode.removeChild(e);else{const o=r.flatMenus[s];(!o||!o.some(i=>i.name==n))&&e.parentNode.removeChild(e)}}else r.flatMenus[G.value.path].some(n=>n.name==t.value)||e.parentNode.removeChild(e)}};function Y(e){e.directive("error",X),e.directive("permission",Q)}p("init");const c=$(H);c.config.errorHandler=(e,t,r)=>{p()};c.use(f);c.use(L);Y(c);for(let e in h)c.component(e,h[e]);c.component("svg-icon",K);c.mount("#app");export{f as r,E as u};
