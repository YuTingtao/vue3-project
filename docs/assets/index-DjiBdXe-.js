import{m as b,y as x,A as i,S as y,o as N,i as k,j as _,a as o,w as t,I as E,T as I,C as q,U as B,V as C,W as R}from"./vender-CgUJfqg-.js";import{u as S}from"./index-BX4jUswr.js";import{l as U}from"./index-B3v3OjSK.js";import{_ as F}from"./plugin-vue_export-helper-DlAUqK2U.js";const T={class:"login-page"},j={class:"login-box"},A=E({name:"Login"}),L=Object.assign(A,{setup(h){const d=b(),m=x(),c=S(),p=i(),a=i({userName:"admin",password:"123456"}),g=y({userName:[{required:!0,message:"请输入账号/手机号/邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),s=i(!1);async function v(){var l;await((l=p.value)==null?void 0:l.validate(e=>{s.value||e&&(s.value=!0,U.login(a.value).then(r=>{r.code=="200"&&(s.value=!1,f())}).catch(()=>{s.value=!1,f()}))}))}async function f(){c.setLogin({token:"Token-123456789",userInfo:{name:"admin",avatar:""}}),await c.getUserMenus(),m.query.redirect?d.replace(m.query.redirect):d.replace("/")}return(l,e)=>{const r=B,n=C,w=R,V=I;return N(),k("div",T,[_("div",j,[e[3]||(e[3]=_("h3",{class:"title"},"欢迎登录",-1)),o(V,{model:a.value,ref_key:"formRef",ref:p,rules:g,size:"large"},{default:t(()=>[o(n,{label:"",prop:"userName"},{default:t(()=>[o(r,{modelValue:a.value.userName,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.userName=u),placeholder:"请输入账号/手机号/邮箱","prefix-icon":"user"},null,8,["modelValue"])]),_:1}),o(n,{label:"",prop:"password"},{default:t(()=>[o(r,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.password=u),placeholder:"请输入密码",type:"password","prefix-icon":"lock"},null,8,["modelValue"])]),_:1}),o(n,null,{default:t(()=>[o(w,{class:"row-btn",type:"primary",loading:s.value,onClick:v},{default:t(()=>e[2]||(e[2]=[q("登 录")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])}}}),D=F(L,[["__scopeId","data-v-9d100416"]]);export{D as default};
