import{b as M,c as j,d as z,e as F,f as T,g as U,h as A,i as X,j as H,k as J,l as W}from"./element-plus-WZYJRZ5E.js";import{u as x,b as $}from"./vue-router-WHR0Whhi.js";import{_ as q,u as G}from"./index-qOPhMOlP.js";import{aa as k,o as s,c as v,W as m,R as l,O as r,X as w,U as b,a as c,P as g,ag as E,r as P,w as K,V as L,y as B,T as I,d as Q,S as Y,L as Z}from"./@vue-iFnbdo9x.js";import{l as ee}from"./login-3wwqdfgL.js";import"./lodash-es-vSGfxUvG.js";import"./async-validator-BHjhHa7C.js";import"./@vueuse-UmKuPg-z.js";import"./@element-plus-eEMicSMF.js";import"./@ctrl-ZggoHSuR.js";import"./@popperjs--N-3kK7X.js";import"./normalize-wheel-es-1urBKM79.js";import"./pinia-OYXpEGn8.js";import"./vue-demi-C4xddsk9.js";import"./pinia-plugin-persist-h1Jd8UcV.js";import"./lazysizes-mB2Dhswp.js";import"./axios-G2rPRu76.js";const te=""+new URL("logo-O6JHtvX6.png",import.meta.url).href,ne={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(e){const h=x();function p(i){h.push(i)}return(i,f)=>{const u=q,_=M,n=k("MenuItem",!0),a=j,t=z;return e.item.meta.visible?(s(),v(g,{key:0},[e.item.children&&e.item.children.filter(o=>o.meta.visible).length>0?(s(),m(a,{key:0,index:e.item.path||e.item.meta.title},{title:l(()=>[e.item.meta.icon?(s(),m(_,{key:0},{default:l(()=>[r(u,{name:e.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),c("span",null,b(e.item.meta.title),1)]),default:l(()=>[(s(!0),v(g,null,E(e.item.children,o=>(s(),m(n,{key:o.path,item:o},null,8,["item"]))),128))]),_:1},8,["index"])):(s(),m(t,{key:1,index:e.item.path,onClick:f[0]||(f[0]=o=>p(e.item.path))},{default:l(()=>[e.item.meta.icon?(s(),m(_,{key:0},{default:l(()=>[r(u,{name:e.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),c("span",null,b(e.item.meta.title),1)]),_:1},8,["index"]))],64)):w("",!0)}}},ae={__name:"BreadCrumb",setup(e){const h=x(),p=$(),i=P([]),f=h.getRoutes();function u(){i.value=[];let n=p.matched;if(n[0].name=="layout"&&(n=n.slice(1)),n.length>1||n[0].meta.parentPath)for(let a=n.length-1;a>=0;a--){const t=n[a];let o=t.path;(a==n.length-1||t.meta.type==0)&&(o=""),i.value.unshift({path:o,title:t.meta.title});const d=t.meta.parentPath||"";d&&i.value.unshift(..._(d))}}function _(n,a=[]){const t=f.find(o=>o.path==n);return t&&a.unshift({path:t.meta.type==0?"":t.path,title:t.meta.title}),t.meta.parentPath?_(t.meta.parentPath,a):a}return K(()=>p.path,()=>{u()},{immediate:!0}),(n,a)=>{const t=F,o=T;return s(),m(o,null,{default:l(()=>[(s(!0),v(g,null,E(i.value,(d,y)=>(s(),m(t,{key:d.path+y,to:d.path},{default:l(()=>[L(b(d.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}},oe={class:"app-aside"},le=c("img",{class:"app-logo-img",src:te,alt:""},null,-1),se=c("span",null,"Vue3管理后台",-1),re=[le,se],ue=Q({name:"Layout"}),Be=Object.assign(ue,{setup(e){const h=x();$();const p=G(),i=B(()=>p.userInfo),f=B(()=>p.userMenus),u=P(!1);function _(){u.value=!u.value}function n(){ee.logout().finally(()=>{p.setLogout(),h.replace("/login")})}return(a,t)=>{const o=M,d=X,y=k("arrow-down"),S=H,V=J,D=U,R=W,N=A,O=k("router-view");return s(),v(g,null,[c("div",{class:"app-head",style:I(`left: ${u.value?"64px":"200px"};`)},[r(o,{class:"menu-collapse",onClick:_},{default:l(()=>[(s(),m(Y(u.value?"Expand":"Fold")))]),_:1}),r(ae),r(D,{trigger:"hover"},{dropdown:l(()=>[r(V,null,{default:l(()=>[r(S,{onClick:n},{default:l(()=>[L("退出")]),_:1})]),_:1})]),default:l(()=>[c("div",null,[r(d,{src:i.value.avatar,size:32,icon:"UserFilled",shape:"circle",fit:"cover"},null,8,["src"]),c("span",null,b(i.value.name),1),r(o,null,{default:l(()=>[r(y)]),_:1})])]),_:1})],4),c("div",oe,[r(N,null,{default:l(()=>[c("div",{class:Z(["app-logo",u.value?"collapsed":""])},re,2),r(R,{collapse:u.value,"text-color":"#fff","background-color":"#3c4f60","default-active":a.$route.meta.activePath||a.$route.path||a.$route.name},{default:l(()=>[(s(!0),v(g,null,E(f.value,C=>(s(),m(ne,{key:C.path,item:C},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),c("div",{class:"app-main",style:I(`padding-left: ${u.value?"64px":"200px"};`)},[r(O,{class:"app-view"})],4)],64)}}});export{Be as default};
