import{p as x,r as k,o as u,k as v,c as i,w as o,a as s,q as w,t as y,l as _,F as g,s as E,v as M,x as R,y as j,A as $,B as P,C as z,D,G as O,H as T,j as B,I,J as q,K as G,L as H,M as J,N as K,O as U,P as Q}from"./vendor-pvmdQ-R0.js";import{_ as W,u as X}from"./index-xXcBo5fU.js";import{l as Y}from"./login-pA9O0MHt.js";const Z={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(e){const h=x();function m(r){h.push(r)}return(r,f)=>{const c=W,p=M,a=k("MenuItem",!0),l=R,t=j;return e.item.meta.visible?(u(),v(g,{key:0},[e.item.children&&e.item.children.filter(n=>n.meta.visible).length>0?(u(),i(l,{key:0,index:e.item.path||e.item.meta.title},{title:o(()=>[e.item.meta.icon?(u(),i(p,{key:0},{default:o(()=>[s(c,{name:e.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),_("span",null,y(e.item.meta.title),1)]),default:o(()=>[(u(!0),v(g,null,E(e.item.children,n=>(u(),i(a,{key:n.path+n.title,item:n},null,8,["item"]))),128))]),_:1},8,["index"])):(u(),i(t,{key:1,index:e.item.path,onClick:f[0]||(f[0]=n=>m(e.item.path))},{default:o(()=>[e.item.meta.icon?(u(),i(p,{key:0},{default:o(()=>[s(c,{name:e.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),_("span",null,y(e.item.meta.title),1)]),_:1},8,["index"]))],64)):w("",!0)}}},ee={__name:"BreadCrumb",setup(e){const h=x(),m=$(),r=P([]),f=h.getRoutes();function c(){r.value=[];let a=m.matched;if(a[0].name=="layout"&&(a=a.slice(1)),a.length>1||a[0].meta.parentPath)for(let l=a.length-1;l>=0;l--){const t=a[l];let n=t.path;(l==a.length-1||t.meta.type==0)&&(n=""),r.value.unshift({path:n,title:t.meta.title});const d=t.meta.parentPath||"";d&&r.value.unshift(...p(d))}}function p(a,l=[]){const t=f.find(n=>n.path==a);return t&&l.unshift({path:t.meta.type==0?"":t.path,title:t.meta.title}),t.meta.parentPath?p(t.meta.parentPath,l):l}return z(()=>m.path,()=>{c()},{immediate:!0}),(a,l)=>{const t=O,n=T;return u(),i(n,null,{default:o(()=>[(u(!0),v(g,null,E(r.value,(d,b)=>(u(),i(t,{key:d.path+b,to:d.path},{default:o(()=>[D(y(d.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}},te={class:"app-aside"},oe={__name:"index",setup(e){const h=x();$();const m=X(),r=B(()=>m.userInfo),f=B(()=>m.userMenus),c=P(!1);function p(){c.value=!c.value}function a(){Y.logout().finally(()=>{m.setLogout(),h.replace("/login")})}return(l,t)=>{const n=M,d=J,b=k("arrow-down"),N=K,S=U,F=q,L=Q,V=G,A=k("router-view");return u(),v(g,null,[_("div",{class:"app-head",style:I(`left: ${c.value?"64px":"200px"};`)},[s(n,{class:"menu-collapse",onClick:p},{default:o(()=>[(u(),i(H(c.value?"Expand":"Fold")))]),_:1}),s(ee),s(F,{trigger:"hover"},{dropdown:o(()=>[s(S,null,{default:o(()=>[s(N,{onClick:a},{default:o(()=>[D("退出")]),_:1})]),_:1})]),default:o(()=>[_("div",null,[s(d,{src:r.value.avatar,size:32,icon:"UserFilled",shape:"circle",fit:"cover"},null,8,["src"]),_("span",null,y(r.value.name),1),s(n,null,{default:o(()=>[s(b)]),_:1})])]),_:1})],4),_("div",te,[s(V,null,{default:o(()=>[s(L,{collapse:c.value,"text-color":"#fff","background-color":"#3c4f60","default-active":l.$route.meta.activePath||l.$route.path||l.$route.name},{default:o(()=>[(u(!0),v(g,null,E(f.value,C=>(u(),i(Z,{key:C.name,item:C},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),_("div",{class:"app-main",style:I(`padding-left: ${c.value?"64px":"200px"};`)},[s(A,{class:"app-view"})],4)],64)}}};export{oe as default};
