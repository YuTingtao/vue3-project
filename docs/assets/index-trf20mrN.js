import{p as D,r as C,o as n,k as _,c as u,w as t,a as l,q as w,t as b,l as i,F as f,s as I,v as N,x as H,y as J,A as K,B as M,C as U,j as B,D as $,G as Q,H as W,I as X,J as Y,K as P,L as Z,M as ee,N as te,O as ne,P as ae}from"./vendor-cw4o4j6p.js";import{_ as le,u as oe}from"./index-GoTHgQ-r.js";import{l as ue}from"./login-JZrjmVAP.js";const se={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(e){const h=D();function p(m){h.push(m)}return(m,s)=>{const v=le,g=N,y=C("MenuItem",!0),k=H,x=J;return e.item.meta.hidden?w("",!0):(n(),_(f,{key:0},[e.item.children&&e.item.children.filter(a=>!a.meta.hidden).length>0?(n(),u(k,{key:0,index:e.item.path||e.item.meta.title},{title:t(()=>[e.item.meta.icon?(n(),u(g,{key:0},{default:t(()=>[l(v,{name:e.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),i("span",null,b(e.item.meta.title),1)]),default:t(()=>[(n(!0),_(f,null,I(e.item.children,a=>(n(),u(y,{key:a.path+a.title,item:a},null,8,["item"]))),128))]),_:1},8,["index"])):(n(),u(x,{key:1,index:e.item.path,onClick:s[0]||(s[0]=a=>p(e.item.path))},{default:t(()=>[e.item.meta.icon?(n(),u(g,{key:0},{default:t(()=>[l(v,{name:e.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),i("span",null,b(e.item.meta.title),1)]),_:1},8,["index"]))],64))}}},ce={class:"app-aside"},de={__name:"index",setup(e){const h=D(),p=K(),m=oe(),s=M([]),v=h.getRoutes();function g(){var r;s.value=[];const c=((r=p.meta)==null?void 0:r.parentPath)||null;c&&(s.value=y(c),s.value.push({path:"",title:p.meta.title}))}function y(c,r=[]){const o=v.find(E=>E.path==c);return o&&r.unshift({path:o.meta.type==0?"":o.path,title:o.meta.title}),o.meta.parentPath?y(o.meta.parentPath,r):r}U(()=>p.path,()=>{g()},{immediate:!0});const k=B(()=>m.userInfo),x=B(()=>m.userMenus),a=M(!1);function S(){a.value=!a.value}function F(){ue.logout().finally(()=>{m.setLogout(),h.replace("/login")})}return(c,r)=>{const o=N,E=ae,L=Q,V=Z,A=C("arrow-down"),R=ee,j=te,z=W,O=ne,T=X,q=C("router-view");return n(),_(f,null,[i("div",{class:"app-head",style:$(`left: ${a.value?"64px":"200px"};`)},[l(o,{class:"menu-collapse",onClick:S},{default:t(()=>[(n(),u(Y(a.value?"Expand":"Fold")))]),_:1}),s.value.length>0?(n(),u(L,{key:0},{default:t(()=>[(n(!0),_(f,null,I(s.value,(d,G)=>(n(),u(E,{key:d.path+G,to:d.path},{default:t(()=>[P(b(d.title),1)]),_:2},1032,["to"]))),128))]),_:1})):w("",!0),l(z,{trigger:"hover"},{dropdown:t(()=>[l(j,null,{default:t(()=>[l(R,{onClick:F},{default:t(()=>[P("退出")]),_:1})]),_:1})]),default:t(()=>[i("div",null,[l(V,{src:k.value.avatar,size:32,icon:"UserFilled",shape:"circle",fit:"cover"},null,8,["src"]),i("span",null,b(k.value.name),1),l(o,null,{default:t(()=>[l(A)]),_:1})])]),_:1})],4),i("div",ce,[l(T,null,{default:t(()=>[l(O,{collapse:a.value,"text-color":"#fff","background-color":"#3c4f60","default-active":c.$route.meta.activePath||c.$route.path||c.$route.name},{default:t(()=>[(n(!0),_(f,null,I(x.value,d=>(n(),u(se,{key:d.name,item:d},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),i("div",{class:"app-main",style:$(`padding-left: ${a.value?"64px":"200px"};`)},[l(q,{class:"app-view"})],4)],64)}}};export{de as default};
