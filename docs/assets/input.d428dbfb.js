var Ue=Object.defineProperty,Xe=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var ke=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var ze=(r,a,n)=>a in r?Ue(r,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[a]=n,J=(r,a)=>{for(var n in a||(a={}))qe.call(a,n)&&ze(r,n,a[n]);if(ke)for(var n of ke(a))Ze.call(a,n)&&ze(r,n,a[n]);return r},Se=(r,a)=>Xe(r,Ye(a));import{c,aV as Ge,g as Ve,r as N,G as Ce,h as Je,aA as Qe,d as Q,ab as Ie,ar as eo,ac as ee,j as oo,aW as ro,aD as to,ai as no,aC as lo,l as Ee,aT as oe,aX as ao,aY as io,aZ as po,I as so,w as re,J as P,o as uo,L as co,q as vo,y as bo,z as fo,s as d,D as m,O as f,F as te,B as h,u as o,M as H,A as $,v as y,x as M,N as K,ad as B,Y as ne,E as ho,a_ as xo,aO as go,R as _o,a9 as W,C as mo,_ as yo,i as wo,P as Pe,Q as ko}from"./index.92e60aec.js";import{a as zo,b as So,i as Co,d as $e}from"./button.21b2dfa8.js";const le="update:modelValue",Io=r=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(r),Eo=["class","style"],Po=/^on[A-Z]/,$o=(r={})=>{const{excludeListeners:a=!1,excludeKeys:n}=r,t=c(()=>((n==null?void 0:n.value)||[]).concat(Eo)),s=Ve();return s?c(()=>{var v;return Ge(Object.entries((v=s.proxy)==null?void 0:v.$attrs).filter(([p])=>!t.value.includes(p)&&!(a&&Po.test(p))))}):c(()=>({}))};function No(r){const a=N();function n(){if(r.value==null)return;const{selectionStart:s,selectionEnd:v,value:p}=r.value;if(s==null||v==null)return;const _=p.slice(0,Math.max(0,s)),u=p.slice(Math.max(0,v));a.value={selectionStart:s,selectionEnd:v,value:p,beforeTxt:_,afterTxt:u}}function t(){if(r.value==null||a.value==null)return;const{value:s}=r.value,{beforeTxt:v,afterTxt:p,selectionStart:_}=a.value;if(v==null||p==null||_==null)return;let u=s.length;if(s.endsWith(p))u=s.length-p.length;else if(s.startsWith(v))u=v.length;else{const x=v[_-1],w=s.indexOf(x,_-1);w!==-1&&(u=w+1)}r.value.setSelectionRange(u,u)}return[n,t]}let g;const Vo=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Ao=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function To(r){const a=window.getComputedStyle(r),n=a.getPropertyValue("box-sizing"),t=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),s=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:Ao.map(p=>`${p}:${a.getPropertyValue(p)}`).join(";"),paddingSize:t,borderSize:s,boxSizing:n}}function Ne(r,a=1,n){var t;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:s,borderSize:v,boxSizing:p,contextStyle:_}=To(r);g.setAttribute("style",`${_};${Vo}`),g.value=r.value||r.placeholder||"";let u=g.scrollHeight;const x={};p==="border-box"?u=u+v:p==="content-box"&&(u=u-s),g.value="";const w=g.scrollHeight-s;if(Ce(a)){let b=w*a;p==="border-box"&&(b=b+s+v),u=Math.max(b,u),x.minHeight=`${b}px`}if(Ce(n)){let b=w*n;p==="border-box"&&(b=b+s+v),u=Math.min(b,u)}return x.height=`${u}px`,(t=g.parentNode)==null||t.removeChild(g),g=void 0,x}const Fo=Je({id:{type:String,default:void 0},size:Qe,disabled:Boolean,modelValue:{type:Q([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Q([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Ie,default:""},prefixIcon:{type:Ie,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Q([Object,Array,String]),default:()=>eo({})}}),Mo={[le]:r=>ee(r),input:r=>ee(r),change:r=>ee(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,mouseleave:r=>r instanceof MouseEvent,mouseenter:r=>r instanceof MouseEvent,keydown:r=>r instanceof Event,compositionstart:r=>r instanceof CompositionEvent,compositionupdate:r=>r instanceof CompositionEvent,compositionend:r=>r instanceof CompositionEvent},Bo=["role"],Lo=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],Oo=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],Do={name:"ElInput",inheritAttrs:!1},Ro=oo(Se(J({},Do),{props:Fo,emits:Mo,setup(r,{expose:a,emit:n}){const t=r,s={suffix:"append",prefix:"prepend"},v=Ve(),p=ro(),_=to(),u=c(()=>{const e={};return t.containerRole==="combobox"&&(e["aria-haspopup"]=p["aria-haspopup"],e["aria-owns"]=p["aria-owns"],e["aria-expanded"]=p["aria-expanded"]),e}),x=$o({excludeKeys:c(()=>Object.keys(u.value))}),{form:w,formItem:b}=zo(),{inputId:ae}=So(t,{formItemContext:b}),Ae=no(),C=lo(),l=Ee("input"),ie=Ee("textarea"),L=oe(),I=oe(),V=N(!1),U=N(!1),A=N(!1),O=N(!1),pe=N(),X=oe(t.inputStyle),T=c(()=>L.value||I.value),se=c(()=>{var e;return(e=w==null?void 0:w.statusIcon)!=null?e:!1}),F=c(()=>(b==null?void 0:b.validateState)||""),ue=c(()=>F.value&&ao[F.value]),Te=c(()=>O.value?io:po),Fe=c(()=>[p.style,t.inputStyle]),de=c(()=>[t.inputStyle,X.value,{resize:t.resize}]),k=c(()=>Co(t.modelValue)?"":String(t.modelValue)),D=c(()=>t.clearable&&!C.value&&!t.readonly&&!!k.value&&(V.value||U.value)),Y=c(()=>t.showPassword&&!C.value&&!t.readonly&&!!k.value&&(!!k.value||V.value)),E=c(()=>t.showWordLimit&&!!x.value.maxlength&&(t.type==="text"||t.type==="textarea")&&!C.value&&!t.readonly&&!t.showPassword),q=c(()=>Array.from(k.value).length),Me=c(()=>!!E.value&&q.value>Number(x.value.maxlength)),Be=c(()=>!!_.suffix||!!t.suffixIcon||D.value||t.showPassword||E.value||!!F.value&&se.value),[Le,Oe]=No(L);so(I,e=>{if(!E.value||t.resize!=="both")return;const i=e[0],{width:z}=i.contentRect;pe.value={right:`calc(100% - ${z+15+6}px)`}});const R=()=>{const{type:e,autosize:i}=t;if(!(!wo||e!=="textarea"))if(i){const z=Pe(i)?i.minRows:void 0,S=Pe(i)?i.maxRows:void 0;X.value=J({},Ne(I.value,z,S))}else X.value={minHeight:Ne(I.value).minHeight}},j=()=>{const e=T.value;!e||e.value===k.value||(e.value=k.value)},ce=e=>{const{el:i}=v.vnode;if(!i)return;const S=Array.from(i.querySelectorAll(`.${l.e(e)}`)).find(We=>We.parentNode===i);if(!S)return;const we=s[e];_[we]?S.style.transform=`translateX(${e==="suffix"?"-":""}${i.querySelector(`.${l.be("group",we)}`).offsetWidth}px)`:S.removeAttribute("style")},Z=()=>{ce("prefix"),ce("suffix")},G=async e=>{Le();let{value:i}=e.target;t.formatter&&(i=t.parser?t.parser(i):i,i=t.formatter(i)),!A.value&&i!==k.value&&(n(le,i),n("input",i),await P(),j(),Oe())},ve=e=>{n("change",e.target.value)},be=e=>{n("compositionstart",e),A.value=!0},fe=e=>{var i;n("compositionupdate",e);const z=(i=e.target)==null?void 0:i.value,S=z[z.length-1]||"";A.value=!Io(S)},he=e=>{n("compositionend",e),A.value&&(A.value=!1,G(e))},De=()=>{O.value=!O.value,xe()},xe=async()=>{var e;await P(),(e=T.value)==null||e.focus()},Re=()=>{var e;return(e=T.value)==null?void 0:e.blur()},ge=e=>{V.value=!0,n("focus",e)},_e=e=>{var i;V.value=!1,n("blur",e),t.validateEvent&&((i=b==null?void 0:b.validate)==null||i.call(b,"blur").catch(z=>$e()))},je=e=>{U.value=!1,n("mouseleave",e)},He=e=>{U.value=!0,n("mouseenter",e)},me=e=>{n("keydown",e)},Ke=()=>{var e;(e=T.value)==null||e.select()},ye=()=>{n(le,""),n("change",""),n("clear"),n("input","")};return re(()=>t.modelValue,()=>{var e;P(()=>R()),t.validateEvent&&((e=b==null?void 0:b.validate)==null||e.call(b,"change").catch(i=>$e()))}),re(k,()=>j()),re(()=>t.type,async()=>{await P(),j(),R(),Z()}),uo(async()=>{!t.formatter&&t.parser,j(),Z(),await P(),R()}),co(async()=>{await P(),Z()}),a({input:L,textarea:I,ref:T,textareaStyle:de,autosize:vo(t,"autosize"),focus:xe,blur:Re,select:Ke,clear:ye,resizeTextarea:R}),(e,i)=>bo((d(),m("div",ne(o(u),{class:[e.type==="textarea"?o(ie).b():o(l).b(),o(l).m(o(Ae)),o(l).is("disabled",o(C)),o(l).is("exceed",o(Me)),{[o(l).b("group")]:e.$slots.prepend||e.$slots.append,[o(l).bm("group","append")]:e.$slots.append,[o(l).bm("group","prepend")]:e.$slots.prepend,[o(l).m("prefix")]:e.$slots.prefix||e.prefixIcon,[o(l).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[o(l).bm("suffix","password-clear")]:o(D)&&o(Y)},e.$attrs.class],style:o(Fe),role:e.containerRole,onMouseenter:He,onMouseleave:je}),[f(" input "),e.type!=="textarea"?(d(),m(te,{key:0},[f(" prepend slot "),e.$slots.prepend?(d(),m("div",{key:0,class:h(o(l).be("group","prepend"))},[H(e.$slots,"prepend")],2)):f("v-if",!0),$("div",{class:h([o(l).e("wrapper"),o(l).is("focus",V.value)])},[f(" prefix slot "),e.$slots.prefix||e.prefixIcon?(d(),m("span",{key:0,class:h(o(l).e("prefix"))},[$("span",{class:h(o(l).e("prefix-inner"))},[H(e.$slots,"prefix"),e.prefixIcon?(d(),y(o(B),{key:0,class:h(o(l).e("icon"))},{default:M(()=>[(d(),y(K(e.prefixIcon)))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0),$("input",ne({id:o(ae),ref_key:"input",ref:L,class:o(l).e("inner")},o(x),{type:e.showPassword?O.value?"text":"password":e.type,disabled:o(C),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:be,onCompositionupdate:fe,onCompositionend:he,onInput:G,onFocus:ge,onBlur:_e,onChange:ve,onKeydown:me}),null,16,Lo),f(" suffix slot "),o(Be)?(d(),m("span",{key:1,class:h(o(l).e("suffix"))},[$("span",{class:h(o(l).e("suffix-inner"))},[!o(D)||!o(Y)||!o(E)?(d(),m(te,{key:0},[H(e.$slots,"suffix"),e.suffixIcon?(d(),y(o(B),{key:0,class:h(o(l).e("icon"))},{default:M(()=>[(d(),y(K(e.suffixIcon)))]),_:1},8,["class"])):f("v-if",!0)],64)):f("v-if",!0),o(D)?(d(),y(o(B),{key:1,class:h([o(l).e("icon"),o(l).e("clear")]),onMousedown:go(o(_o),["prevent"]),onClick:ye},{default:M(()=>[ho(o(xo))]),_:1},8,["class","onMousedown"])):f("v-if",!0),o(Y)?(d(),y(o(B),{key:2,class:h([o(l).e("icon"),o(l).e("password")]),onClick:De},{default:M(()=>[(d(),y(K(o(Te))))]),_:1},8,["class"])):f("v-if",!0),o(E)?(d(),m("span",{key:3,class:h(o(l).e("count"))},[$("span",{class:h(o(l).e("count-inner"))},W(o(q))+" / "+W(o(x).maxlength),3)],2)):f("v-if",!0),o(F)&&o(ue)&&o(se)?(d(),y(o(B),{key:4,class:h([o(l).e("icon"),o(l).e("validateIcon"),o(l).is("loading",o(F)==="validating")])},{default:M(()=>[(d(),y(K(o(ue))))]),_:1},8,["class"])):f("v-if",!0)],2)],2)):f("v-if",!0)],2),f(" append slot "),e.$slots.append?(d(),m("div",{key:1,class:h(o(l).be("group","append"))},[H(e.$slots,"append")],2)):f("v-if",!0)],64)):(d(),m(te,{key:1},[f(" textarea "),$("textarea",ne({id:o(ae),ref_key:"textarea",ref:I,class:o(ie).e("inner")},o(x),{tabindex:e.tabindex,disabled:o(C),readonly:e.readonly,autocomplete:e.autocomplete,style:o(de),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:be,onCompositionupdate:fe,onCompositionend:he,onInput:G,onFocus:ge,onBlur:_e,onChange:ve,onKeydown:me}),null,16,Oo),o(E)?(d(),m("span",{key:0,style:mo(pe.value),class:h(o(l).e("count"))},W(o(q))+" / "+W(o(x).maxlength),7)):f("v-if",!0)],64))],16,Bo)),[[fo,e.type!=="hidden"]])}}));var jo=yo(Ro,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Uo=ko(jo);export{Uo as E};
