import{b as j,c as q,d as O,e as T,f as U,g as F,h as Q,i as X,j as G,k as H,l as J}from"./vendor-element-Dtgv3JhO.js";import{_ as B,u as K}from"./index-TqeDwQdN.js";import{aX as W,b1 as k,ap as I,o as v,L as y,q as u,P as _,Q as o,M as x,aA as w,y as c,S as s,U as b,n as P,r as Y,C as Z,ae as L,b2 as V,c as C,u as d,V as M,O as ee}from"./vendor-yvcakwI2.js";import{l as te}from"./login-BBZpqWZa.js";const ne=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,ae=W("appStore",{state:()=>({menu:{isExpand:!0}}),getters:{},actions:{},persist:{key:"appStore",storage:localStorage}}),oe={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(n){const g=k();function p(m){g.push(m)}return(m,r)=>{const f=B,h=j,a=I("MenuItem",!0),l=q,e=O;return n.item.meta.visible?(u(),v(x,{key:0},[n.item.children&&n.item.children.filter(t=>t.meta.visible).length>0?(u(),_(l,{key:0,index:n.item.path||n.item.meta.title},{title:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):y("",!0),c("span",null,b(n.item.meta.title),1)]),default:o(()=>[(u(!0),v(x,null,w(n.item.children,t=>(u(),_(a,{key:t.path,item:t},null,8,["item"]))),128))]),_:1},8,["index"])):(u(),_(e,{key:1,index:n.item.path,onClick:r[0]||(r[0]=t=>p(n.item.path))},{default:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):y("",!0),c("span",null,b(n.item.meta.title),1)]),_:1},8,["index"]))],64)):y("",!0)}}},le=P({__name:"BreadCrumb",setup(n){const g=k(),p=V(),m=Y([]),r=g.getRoutes();function f(){m.value=[];let a=p.matched;if(a[0].path==="/"&&(a=a.slice(1)),a.length>0)for(let l=a.length-1;l>=0;l--){const e=a[l];let t=e.path;(l==a.length-1||e.children.length>0)&&(t=""),m.value.unshift({path:t,title:e.meta.title});const i=e.meta.parentPath||"";i&&m.value.unshift(...h(i))}}function h(a,l=[]){var t;const e=r.find(i=>i.path==a);return e&&e.meta&&typeof e.meta.title=="string"&&l.unshift({path:e.path||"",title:e.meta.title}),typeof((t=e==null?void 0:e.meta)==null?void 0:t.parentPath)=="string"?h(e.meta.parentPath,l):l}return Z(()=>p.path,()=>{f()},{immediate:!0}),(a,l)=>{const e=U,t=T;return u(),_(t,null,{default:o(()=>[(u(!0),v(x,null,w(m.value,(i,E)=>(u(),_(e,{key:i.path+E,to:i.path},{default:o(()=>[L(b(i.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),se={class:"app-avatar-dropdown"},ue={class:"app-aside"},pe=P({__name:"AppLayout",setup(n){const g=k(),p=V(),m=K(),r=ae(),f=C(()=>m.userInfo),h=C(()=>m.userMenus);function a(){r.menu.isExpand=!r.menu.isExpand}function l(){te().finally(()=>{m.setLogout(),g.push("/login")})}return(e,t)=>{const i=B,E=X,$=H,A=G,N=F,D=J,R=Q,z=I("router-view");return u(),v(x,null,[c("div",{class:"app-head",style:M(`left: ${d(r).menu.isExpand?"210px":"64px"};`)},[s(i,{class:"menu-collapse",name:d(r).menu.isExpand?"fold":"expand",onClick:a},null,8,["name"]),s(le),s(N,{trigger:"hover"},{dropdown:o(()=>[s(A,null,{default:o(()=>[s($,{onClick:l},{default:o(()=>t[0]||(t[0]=[L("退出",-1)])),_:1,__:[0]})]),_:1})]),default:o(()=>[c("div",se,[s(E,{src:f.value.avatar,size:32},{default:o(()=>[s(i,{name:"avatar-filled"})]),_:1},8,["src"]),c("span",null,b(f.value.userName),1),s(i,{name:"arrow-down"})])]),_:1})],4),c("div",ue,[s(R,null,{default:o(()=>[c("div",{class:ee(["app-logo",d(r).menu.isExpand?"":"collapsed"])},t[1]||(t[1]=[c("img",{class:"app-logo-img",src:ne,alt:""},null,-1),c("span",null,"Vue3管理后台",-1)]),2),s(D,{collapse:!d(r).menu.isExpand,"unique-opened":!0,"default-active":String(d(p).meta.activePath||d(p).path||d(p).name)},{default:o(()=>[(u(!0),v(x,null,w(h.value,S=>(u(),_(oe,{key:S.path,item:S},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),c("div",{class:"app-main",style:M(`padding-left: ${d(r).menu.isExpand?"210px":"64px"};`)},[s(z,{class:"app-view"})],4)],64)}}});export{pe as default};
