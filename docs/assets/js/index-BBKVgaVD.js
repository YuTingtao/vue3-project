const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./RouteView-BJy1FeX7.js","./plugin-vue_export-helper-DlAUqK2U.js","./vendor-DYzAlJaB.js","./index-DKpsLZX4.js","./element-plus-CKH55giu.js","../css/element-plus-DnrgUefx.css","./SvgIcon-CiwGiJ-v.js","../css/SvgIcon-BoKZvwxY.css","../css/index-BAygQtEY.css","./index-CNXagw9T.js","../css/index-CEmv-l65.css","./index-uBfTkdHs.js","../css/index-3luiyGxs.css","./index-FttZwLDR.js","./login-v3UrYZa9.js","../css/index-DP-ArngD.css","./index-nGAjCTLT.js","../css/index-D3hNcPEt.css"])))=>i.map(i=>d[i]);
import{Z as j,_ as k,u as A,aD as M,q as w,a0 as x,be as T,bf as D,bg as I,bh as B,bi as V,ay as C,bj as N,bk as U}from"./vendor-DYzAlJaB.js";import{z as q,E as H,a as $}from"./element-plus-CKH55giu.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const z={__name:"App",setup(e){return(t,r)=>{const n=M("router-view"),o=H;return w(),j(o,{locale:A(q)},{default:k(()=>[x(n)]),_:1},8,["locale"])}}},W="modulepreload",F=function(e,t){return new URL(e,t).href},P={},u=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),y=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(r.map(c=>{if(c=F(c,n),c in P)return;P[c]=!0;const f=c.endsWith(".css"),S=f?'[rel="stylesheet"]':"";if(!!n)for(let p=i.length-1;p>=0;p--){const d=i[p];if(d.href===c&&(!f||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${S}`))return;const l=document.createElement("link");if(l.rel=f?"stylesheet":W,f||(l.as="script"),l.crossOrigin="",l.href=c,y&&l.setAttribute("nonce",y),document.head.appendChild(l),f)return new Promise((p,d)=>{l.addEventListener("load",p),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};function J(e){const t={};function r(n){t[n.name]=n,Array.isArray(n.children)&&n.children.forEach(o=>r(o))}return e.forEach(n=>r(n)),t}function K(e){let t;function r(n){n.children&&n.children.length>0?r(n.children[0]):t=n.path}return r(e),t||"/login"}const X=[{path:"/example",name:"example",component:()=>u(()=>import("./RouteView-BJy1FeX7.js"),__vite__mapDeps([0,1,2]),import.meta.url),meta:{title:"使用案例",icon:"document",visible:1,buttons:[],activePath:"",parentPath:""},children:[{path:"/example/base",name:"exampleBase",component:()=>u(()=>import("./index-DKpsLZX4.js"),__vite__mapDeps([3,4,2,5,6,7,1,8]),import.meta.url),meta:{title:"基础案例",icon:"",visible:1,buttons:["add","edit","delete"],activePath:"",parentPath:""}},{path:"/example/whiteBoard",name:"exampleWhiteBoard",component:()=>u(()=>import("./index-CNXagw9T.js"),__vite__mapDeps([9,4,2,5,10]),import.meta.url),meta:{title:"画板/白板",icon:"",visible:1,buttons:[],activePath:"",parentPath:""}}]}],Z=[{path:"/system",name:"system",component:()=>u(()=>import("./RouteView-BJy1FeX7.js"),__vite__mapDeps([0,1,2]),import.meta.url),meta:{title:"系统设置",icon:"setting",visible:1,buttons:[],activePath:"",parentPath:""},children:[{path:"/system/menu",name:"systemMenu",component:()=>u(()=>import("./index-uBfTkdHs.js"),__vite__mapDeps([11,4,2,5,6,7,1,12]),import.meta.url),meta:{title:"菜单设置",icon:"",visible:1,buttons:[],activePath:"",parentPath:""}}]}],L=[...X,...Z],b=T("store",{state:()=>({token:"",userInfo:{},userMenus:[]}),getters:{menuObj(e){return J(e.userMenus)},firstMenu(e){return e.userMenus.length<1?"/login":K(e.userMenus[0])}},actions:{setLogin(e){const{token:t,...r}=e;this.token=t,this.userInfo=r},setLogout(){this.token=""},getUserMenus(){setTimeout(()=>{this.userMenus=L},100)}},persist:{key:"store",storage:localStorage}});let h;function _(){const e=new XMLHttpRequest;e.open("get","./version.json?t="+Date.now(),!0),e.onreadystatechange=function(){if(e.readyState==4&&e.status==200){const t=JSON.parse(e.responseText);if(!h){h=t.version;return}h!=t.version&&(h=t.version,$.alert("检测到版本有更新，请点击确定刷新页面","提示").then(()=>{location.reload(!0)}))}},e.send()}function G(){_(),setInterval(()=>{_()},3e5)}const Q=[{path:"/",name:"layout",component:()=>u(()=>import("./index-FttZwLDR.js"),__vite__mapDeps([13,4,2,5,6,7,14,15]),import.meta.url),children:[...L]},{path:"/login",name:"login",component:()=>u(()=>import("./index-nGAjCTLT.js"),__vite__mapDeps([16,4,2,5,14,1,17]),import.meta.url)}],v=D({history:I(),routes:Q,scrollBehavior(e,t){return e.hash?{el:e.hash,behavior:"smooth"}:{top:0}}}),Y=["layout","login"];v.beforeEach((e,t)=>{const r=b(),n=Object.keys(r.menuObj);if(!r.token&&e.path!=="/login")return"/login";if(e.path=="/")return r.firstMenu;const o=e.name||"";if(!n.includes(o)&&!Y.includes(o))return r.firstMenu});v.onError(e=>{console.error(e),_()});const R=B();R.use(V);const ee={mounted(e,t){e.src&&(e.onerror=()=>{e.src=t.value,e.onerror=null})},updated(e,t){e.src&&(e.onerror=()=>{e.src=t.value,e.onerror=null})}},te=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"})),oe={mounted(e,t){let r=e,n=t.value;typeof t.value=="object"&&(r=e.querySelector(t.value.scrollEl),n=t.value.method),r&&r.addEventListener("scroll",C(()=>{const{scrollTop:o,scrollHeight:s,clientHeight:i}=r;console.log(o,s,i),o+i>=s-20&&n()},300))}},re=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"})),E=Object.assign({"./modules/error.js":te,"./modules/loadmore.js":re}),g={};for(const e in E){const t=e.replace(/(.*\/)*([^.]+).*/gi,"$2");g[t]=E[e].default}function ne(e){for(const t in g)e.directive(t,g[t])}const se=v.currentRoute;function ie(){const e=b();function t(r,n=se.value.name){var s,i;return!!(((i=(s=e.menuObj[n])==null?void 0:s.meta)==null?void 0:i.buttons)||[]).some(a=>a==r)}return{hasPermission:t}}const ae={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};G();const m=N(z);m.config.errorHandler=(e,t,r)=>{console.error(e,t,r),_()};m.use(v);m.use(R);ne(m);for(const[e,t]of Object.entries(U))m.component(e,t);const{hasPermission:ce}=ie();m.config.globalProperties.$hasPermission=ce;const O=b();O.token&&O.getUserMenus();m.mount("#app");console.log("node_env:","production");console.log("vite_env:",ae);export{L as a,v as r,b as u};
