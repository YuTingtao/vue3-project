import{b as $,c as U,d as j,e as q,f as T,g as O,h as W,i as X,j as Y,k as Z,l as G}from"./element-plus-BD5AbnlQ.js";import{be as H,bl as k,aD as w,o as v,U as y,q as l,Y as p,Z as a,V as x,aw as C,W as m,$ as u,a1 as b,n as S,r as J,I as K,bm as D,ao as P,c as B,a2 as M,u as _,_ as Q,X as ee}from"./vendor-CTpyaoXX.js";import{_ as te,u as ne}from"./index-D_R0Ri2k.js";import{l as ae}from"./login-CrWqxaFu.js";const oe=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,le=H("appStore",{state:()=>({menu:{isExpand:!0}}),getters:{},actions:{},persist:{key:"appStore",storage:localStorage}}),se={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(n){const g=k();function d(i){g.push(i)}return(i,r)=>{const f=te,h=$,o=w("MenuItem",!0),s=U,e=j;return n.item.meta.visible?(l(),v(x,{key:0},[n.item.children&&n.item.children.filter(t=>t.meta.visible).length>0?(l(),p(s,{key:0,index:n.item.path||n.item.meta.title},{title:a(()=>[n.item.meta.icon?(l(),p(h,{key:0},{default:a(()=>[u(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):y("",!0),m("span",null,b(n.item.meta.title),1)]),default:a(()=>[(l(!0),v(x,null,C(n.item.children,t=>(l(),p(o,{key:t.path,item:t},null,8,["item"]))),128))]),_:1},8,["index"])):(l(),p(e,{key:1,index:n.item.path,onClick:r[0]||(r[0]=t=>d(n.item.path))},{default:a(()=>[n.item.meta.icon?(l(),p(h,{key:0},{default:a(()=>[u(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):y("",!0),m("span",null,b(n.item.meta.title),1)]),_:1},8,["index"]))],64)):y("",!0)}}},ue=S({__name:"BreadCrumb",setup(n){const g=k(),d=D(),i=J([]),r=g.getRoutes();function f(){i.value=[];let o=d.matched;if(o[0].name=="layout"&&(o=o.slice(1)),o.length>0)for(let s=o.length-1;s>=0;s--){const e=o[s];let t=e.path;(s==o.length-1||e.children.length>0)&&(t=""),i.value.unshift({path:t,title:e.meta.title});const c=e.meta.parentPath||"";c&&i.value.unshift(...h(c))}}function h(o,s=[]){var t;const e=r.find(c=>c.path==o);return e&&e.meta&&typeof e.meta.title=="string"&&s.unshift({path:e.path||"",title:e.meta.title}),typeof((t=e==null?void 0:e.meta)==null?void 0:t.parentPath)=="string"?h(e.meta.parentPath,s):s}return K(()=>d.path,()=>{f()},{immediate:!0}),(o,s)=>{const e=T,t=q;return l(),p(t,null,{default:a(()=>[(l(!0),v(x,null,C(i.value,(c,E)=>(l(),p(e,{key:c.path+E,to:c.path},{default:a(()=>[P(b(c.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),re={class:"app-aside"},ie=S({name:"Layout"}),_e=S({...ie,setup(n){const g=k(),d=D(),i=ne(),r=le(),f=B(()=>i.userInfo),h=B(()=>i.userMenus);function o(){r.menu.isExpand=!r.menu.isExpand}function s(){ae.logout().finally(()=>{i.setLogout(),g.push("/login")})}return(e,t)=>{const c=$,E=X,V=w("arrow-down"),L=Z,N=Y,R=O,z=G,A=W,F=w("router-view");return l(),v(x,null,[m("div",{class:"app-head",style:M(`left: ${_(r).menu.isExpand?"210px":"64px"};`)},[u(c,{class:"menu-collapse",onClick:o},{default:a(()=>[(l(),p(Q(_(r).menu.isExpand?"Fold":"Expand")))]),_:1}),u(ue),u(R,{trigger:"hover"},{dropdown:a(()=>[u(N,null,{default:a(()=>[u(L,{onClick:s},{default:a(()=>t[0]||(t[0]=[P("退出")])),_:1})]),_:1})]),default:a(()=>[m("div",null,[u(E,{src:f.value.avatar,size:32,icon:"UserFilled",shape:"circle",fit:"cover"},null,8,["src"]),m("span",null,b(f.value.userName),1),u(c,null,{default:a(()=>[u(V)]),_:1})])]),_:1})],4),m("div",re,[u(A,null,{default:a(()=>[m("div",{class:ee(["app-logo",_(r).menu.isExpand?"":"collapsed"])},t[1]||(t[1]=[m("img",{class:"app-logo-img",src:oe,alt:""},null,-1),m("span",null,"Vue3管理后台",-1)]),2),u(z,{collapse:!_(r).menu.isExpand,"unique-opened":!0,"default-active":_(d).meta.activePath||_(d).path||_(d).name},{default:a(()=>[(l(!0),v(x,null,C(h.value,I=>(l(),p(se,{key:I.path,item:I},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),m("div",{class:"app-main",style:M(`padding-left: ${_(r).menu.isExpand?"210px":"64px"};`)},[u(F,{class:"app-view"})],4)],64)}}});export{_e as default};
