import{b as P,c as F,d as J,e as O,f as U,g as W,h as X,i as Y,j as Z,k as G,l as H}from"./element-plus-BEzc5NB6.js";import{_ as V,u as K}from"./index-GnUGg7T3.js";import{be as Q,bk as w,aD as k,o as v,V as y,q as u,Z as _,_ as o,W as x,aw as S,X as m,a0 as s,a2 as b,n as C,r as ee,J as te,bl as $,ao as D,c as I,u as d,a3 as M,Y as ne}from"./vendor-D-cnfIL5.js";import{l as ae}from"./login-OyDjSV5D.js";const oe=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,le=Q("appStore",{state:()=>({menu:{isExpand:!0}}),getters:{},actions:{},persist:{key:"appStore",storage:localStorage}}),se={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(n){const g=w();function p(i){g.push(i)}return(i,r)=>{const f=V,h=P,a=k("MenuItem",!0),l=F,e=J;return n.item.meta.visible?(u(),v(x,{key:0},[n.item.children&&n.item.children.filter(t=>t.meta.visible).length>0?(u(),_(l,{key:0,index:n.item.path||n.item.meta.title},{title:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):y("",!0),m("span",null,b(n.item.meta.title),1)]),default:o(()=>[(u(!0),v(x,null,S(n.item.children,t=>(u(),_(a,{key:t.path,item:t},null,8,["item"]))),128))]),_:1},8,["index"])):(u(),_(e,{key:1,index:n.item.path,onClick:r[0]||(r[0]=t=>p(n.item.path))},{default:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):y("",!0),m("span",null,b(n.item.meta.title),1)]),_:1},8,["index"]))],64)):y("",!0)}}},ue=C({__name:"BreadCrumb",setup(n){const g=w(),p=$(),i=ee([]),r=g.getRoutes();function f(){i.value=[];let a=p.matched;if(a[0].name=="layout"&&(a=a.slice(1)),a.length>0)for(let l=a.length-1;l>=0;l--){const e=a[l];let t=e.path;(l==a.length-1||e.children.length>0)&&(t=""),i.value.unshift({path:t,title:e.meta.title});const c=e.meta.parentPath||"";c&&i.value.unshift(...h(c))}}function h(a,l=[]){var t;const e=r.find(c=>c.path==a);return e&&e.meta&&typeof e.meta.title=="string"&&l.unshift({path:e.path||"",title:e.meta.title}),typeof((t=e==null?void 0:e.meta)==null?void 0:t.parentPath)=="string"?h(e.meta.parentPath,l):l}return te(()=>p.path,()=>{f()},{immediate:!0}),(a,l)=>{const e=U,t=O;return u(),_(t,null,{default:o(()=>[(u(!0),v(x,null,S(i.value,(c,E)=>(u(),_(e,{key:c.path+E,to:c.path},{default:o(()=>[D(b(c.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),re={class:"app-aside"},ie=C({name:"Layout"}),_e=C({...ie,setup(n){const g=w(),p=$(),i=K(),r=le(),f=I(()=>i.userInfo),h=I(()=>i.userMenus);function a(){r.menu.isExpand=!r.menu.isExpand}function l(){ae.logout().finally(()=>{i.setLogout(),g.push("/login")})}return(e,t)=>{const c=V,E=Y,L=k("arrow-down"),N=P,R=G,z=Z,A=W,j=H,q=X,T=k("router-view");return u(),v(x,null,[m("div",{class:"app-head",style:M(`left: ${d(r).menu.isExpand?"210px":"64px"};`)},[s(c,{class:"menu-collapse",name:d(r).menu.isExpand?"fold":"expand",onClick:a},null,8,["name"]),s(ue),s(A,{trigger:"hover"},{dropdown:o(()=>[s(z,null,{default:o(()=>[s(R,{onClick:l},{default:o(()=>t[0]||(t[0]=[D("退出")])),_:1,__:[0]})]),_:1})]),default:o(()=>[m("div",null,[s(E,{src:f.value.avatar,size:32,shape:"circle",fit:"cover"},null,8,["src"]),m("span",null,b(f.value.userName),1),s(N,null,{default:o(()=>[s(L)]),_:1})])]),_:1})],4),m("div",re,[s(q,null,{default:o(()=>[m("div",{class:ne(["app-logo",d(r).menu.isExpand?"":"collapsed"])},t[1]||(t[1]=[m("img",{class:"app-logo-img",src:oe,alt:""},null,-1),m("span",null,"Vue3管理后台",-1)]),2),s(j,{collapse:!d(r).menu.isExpand,"unique-opened":!0,"default-active":d(p).meta.activePath||d(p).path||d(p).name},{default:o(()=>[(u(!0),v(x,null,S(h.value,B=>(u(),_(se,{key:B.path,item:B},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),m("div",{class:"app-main",style:M(`padding-left: ${d(r).menu.isExpand?"210px":"64px"};`)},[s(T,{class:"app-view"})],4)],64)}}});export{_e as default};
