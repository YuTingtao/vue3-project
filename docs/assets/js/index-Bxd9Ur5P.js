import{_ as j,u as O}from"./index-VTHSqtH6.js";/* empty css                *//* empty css               */import{ao as T,at as w,ab as k,v,F as b,x as l,I as p,J as a,G as x,a8 as C,A as m,L as u,O as E,t as S,r as U,f as q,au as P,a2 as L,c as B,P as M,u as _,K as G,H}from"./vue-render-BaYS_z1e.js";import{c as $,d as J,e as K,f as Q,g as W,h as X,i as Y,j as Z,k as ee,l as te,m as ne}from"./element-plus-DzTveOOg.js";import{l as ae}from"./login-B2WFWoqz.js";const oe=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,le=T("appStore",{state:()=>({menu:{isExpand:!0}}),getters:{},actions:{},persist:{key:"appStore",storage:localStorage}}),se={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(n){const g=w();function d(i){g.push(i)}return(i,r)=>{const f=j,h=$,o=k("MenuItem",!0),s=J,e=K;return n.item.meta.visible?(l(),v(x,{key:0},[n.item.children&&n.item.children.filter(t=>t.meta.visible).length>0?(l(),p(s,{key:0,index:n.item.path||n.item.meta.title},{title:a(()=>[n.item.meta.icon?(l(),p(h,{key:0},{default:a(()=>[u(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):b("",!0),m("span",null,E(n.item.meta.title),1)]),default:a(()=>[(l(!0),v(x,null,C(n.item.children,t=>(l(),p(o,{key:t.path,item:t},null,8,["item"]))),128))]),_:1},8,["index"])):(l(),p(e,{key:1,index:n.item.path,onClick:r[0]||(r[0]=t=>d(n.item.path))},{default:a(()=>[n.item.meta.icon?(l(),p(h,{key:0},{default:a(()=>[u(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):b("",!0),m("span",null,E(n.item.meta.title),1)]),_:1},8,["index"]))],64)):b("",!0)}}},ue=S({__name:"BreadCrumb",setup(n){const g=w(),d=P(),i=U([]),r=g.getRoutes();function f(){i.value=[];let o=d.matched;if(o[0].name=="layout"&&(o=o.slice(1)),o.length>0)for(let s=o.length-1;s>=0;s--){const e=o[s];let t=e.path;(s==o.length-1||e.children.length>0)&&(t=""),i.value.unshift({path:t,title:e.meta.title});const c=e.meta.parentPath||"";c&&i.value.unshift(...h(c))}}function h(o,s=[]){var t;const e=r.find(c=>c.path==o);return e&&e.meta&&typeof e.meta.title=="string"&&s.unshift({path:e.path||"",title:e.meta.title}),typeof((t=e==null?void 0:e.meta)==null?void 0:t.parentPath)=="string"?h(e.meta.parentPath,s):s}return q(()=>d.path,()=>{f()},{immediate:!0}),(o,s)=>{const e=W,t=Q;return l(),p(t,null,{default:a(()=>[(l(!0),v(x,null,C(i.value,(c,y)=>(l(),p(e,{key:c.path+y,to:c.path},{default:a(()=>[L(E(c.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),re={class:"app-aside"},ie=S({name:"Layout"}),he=S({...ie,setup(n){const g=w(),d=P(),i=O(),r=le(),f=B(()=>i.userInfo),h=B(()=>i.userMenus);function o(){r.menu.isExpand=!r.menu.isExpand}function s(){ae.logout().finally(()=>{i.setLogout(),g.push("/login")})}return(e,t)=>{const c=$,y=Z,D=k("arrow-down"),N=te,V=ee,A=X,F=ne,R=Y,z=k("router-view");return l(),v(x,null,[m("div",{class:"app-head",style:M(`left: ${_(r).menu.isExpand?"210px":"64px"};`)},[u(c,{class:"menu-collapse",onClick:o},{default:a(()=>[(l(),p(G(_(r).menu.isExpand?"Fold":"Expand")))]),_:1}),u(ue),u(A,{trigger:"hover"},{dropdown:a(()=>[u(V,null,{default:a(()=>[u(N,{onClick:s},{default:a(()=>t[0]||(t[0]=[L("退出")])),_:1})]),_:1})]),default:a(()=>[m("div",null,[u(y,{src:f.value.avatar,size:32,icon:"UserFilled",shape:"circle",fit:"cover"},null,8,["src"]),m("span",null,E(f.value.userName),1),u(c,null,{default:a(()=>[u(D)]),_:1})])]),_:1})],4),m("div",re,[u(R,null,{default:a(()=>[m("div",{class:H(["app-logo",_(r).menu.isExpand?"":"collapsed"])},t[1]||(t[1]=[m("img",{class:"app-logo-img",src:oe,alt:""},null,-1),m("span",null,"Vue3管理后台",-1)]),2),u(F,{collapse:!_(r).menu.isExpand,"unique-opened":!0,"default-active":_(d).meta.activePath||_(d).path||_(d).name},{default:a(()=>[(l(!0),v(x,null,C(h.value,I=>(l(),p(se,{key:I.path,item:I},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),m("div",{class:"app-main",style:M(`padding-left: ${_(r).menu.isExpand?"210px":"64px"};`)},[u(z,{class:"app-view"})],4)],64)}}});export{he as default};
