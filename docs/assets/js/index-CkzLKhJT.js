import{d as z,m as k,r as b,o as u,i as v,c,w as l,a as r,n as w,j as m,t as y,F as x,p as C,q as $,v as j,x as q,y as S,A as P,B as O,C as T,D as U,G as D,H as G,h as I,I as M,u as g,J as H,K as J,L as K,M as Q,N as W,O as X,P as Y,Q as Z}from"./vender-DS_IDa1U.js";import{_ as ee,u as te}from"./index-BjuScImJ.js";import{l as ne}from"./login-BmNDlckR.js";const ae=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,oe=z("appStore",{state:()=>({menu:{isExpand:!0}}),getters:{},actions:{},persist:{key:"appStore",storage:localStorage}}),le={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(t){const h=k();function p(a){h.push(a)}return(a,d)=>{const f=ee,_=$,s=b("MenuItem",!0),o=j,e=q;return t.item.meta.visible?(u(),v(x,{key:0},[t.item.children&&t.item.children.filter(n=>n.meta.visible).length>0?(u(),c(o,{key:0,index:t.item.path||t.item.meta.title},{title:l(()=>[t.item.meta.icon?(u(),c(_,{key:0},{default:l(()=>[r(f,{name:t.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),m("span",null,y(t.item.meta.title),1)]),default:l(()=>[(u(!0),v(x,null,C(t.item.children,n=>(u(),c(s,{key:n.path,item:n},null,8,["item"]))),128))]),_:1},8,["index"])):(u(),c(e,{key:1,index:t.item.path,onClick:d[0]||(d[0]=n=>p(t.item.path))},{default:l(()=>[t.item.meta.icon?(u(),c(_,{key:0},{default:l(()=>[r(f,{name:t.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),m("span",null,y(t.item.meta.title),1)]),_:1},8,["index"]))],64)):w("",!0)}}},se=S({__name:"BreadCrumb",setup(t){const h=k(),p=P(),a=O([]),d=h.getRoutes();function f(){a.value=[];let s=p.matched;if(s[0].name=="layout"&&(s=s.slice(1)),s.length>0)for(let o=s.length-1;o>=0;o--){const e=s[o];let n=e.path;(o==s.length-1||e.children.length>0)&&(n=""),a.value.unshift({path:n,title:e.meta.title});const i=e.meta.parentPath||"";i&&a.value.unshift(..._(i))}}function _(s,o=[]){var n;const e=d.find(i=>i.path==s);return e&&e.meta&&typeof e.meta.title=="string"&&o.unshift({path:e.path||"",title:e.meta.title}),typeof((n=e==null?void 0:e.meta)==null?void 0:n.parentPath)=="string"?_(e.meta.parentPath,o):o}return T(()=>p.path,()=>{f()},{immediate:!0}),(s,o)=>{const e=G,n=U;return u(),c(n,null,{default:l(()=>[(u(!0),v(x,null,C(a.value,(i,E)=>(u(),c(e,{key:i.path+E,to:i.path},{default:l(()=>[D(y(i.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),ue={class:"app-aside"},re=S({name:"Layout"}),pe=S({...re,setup(t){const h=k();P();const p=te(),a=oe(),d=I(()=>p.userInfo),f=I(()=>p.userMenus);function _(){a.menu.isExpand=!a.menu.isExpand}function s(){ne().finally(()=>{p.setLogout(),h.push("/login")})}return(o,e)=>{const n=$,i=W,E=b("arrow-down"),L=X,N=Y,V=H,A=Z,F=J,R=b("router-view");return u(),v(x,null,[m("div",{class:"app-head",style:M(`left: ${g(a).menu.isExpand?"210px":"64px"};`)},[r(n,{class:"menu-collapse",onClick:_},{default:l(()=>[(u(),c(K(g(a).menu.isExpand?"Fold":"Expand")))]),_:1}),r(se),r(V,{trigger:"hover"},{dropdown:l(()=>[r(N,null,{default:l(()=>[r(L,{onClick:s},{default:l(()=>e[0]||(e[0]=[D("退出")])),_:1})]),_:1})]),default:l(()=>[m("div",null,[r(i,{src:d.value.avatar,size:32,icon:"UserFilled",shape:"circle",fit:"cover"},null,8,["src"]),m("span",null,y(d.value.userName),1),r(n,null,{default:l(()=>[r(E)]),_:1})])]),_:1})],4),m("div",ue,[r(F,null,{default:l(()=>[m("div",{class:Q(["app-logo",g(a).menu.isExpand?"":"collapsed"])},e[1]||(e[1]=[m("img",{class:"app-logo-img",src:ae,alt:""},null,-1),m("span",null,"Vue3管理后台",-1)]),2),r(A,{collapse:!g(a).menu.isExpand,"unique-opened":!0,"default-active":o.$route.meta.activePath||o.$route.path||o.$route.name},{default:l(()=>[(u(!0),v(x,null,C(f.value,B=>(u(),c(le,{key:B.path,item:B},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),m("div",{class:"app-main",style:M(`padding-left: ${g(a).menu.isExpand?"210px":"64px"};`)},[r(R,{class:"app-view"})],4)],64)}}});export{pe as default};
