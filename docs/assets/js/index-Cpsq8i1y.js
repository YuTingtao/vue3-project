import{d as j,m as k,r as b,i as v,n as w,o as l,c as p,w as a,F as x,p as C,j as m,q as P,a as u,t as y,v as q,x as O,y as S,A as T,B as U,C as G,D,G as H,H as L,h as I,I as J,J as M,u as _,K,L as Q,M as W,N as X,O as Y,P as Z,Q as ee}from"./vender-DjXCCsC3.js";import{_ as te,u as ne}from"./index-BpzVtnY-.js";import{l as ae}from"./login-DF4PTjUW.js";const oe=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,le=j("appStore",{state:()=>({menu:{isExpand:!0}}),getters:{},actions:{},persist:{key:"appStore",storage:localStorage}}),se={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(n){const g=k();function d(i){g.push(i)}return(i,r)=>{const f=te,h=P,o=b("MenuItem",!0),s=q,e=O;return n.item.meta.visible?(l(),v(x,{key:0},[n.item.children&&n.item.children.filter(t=>t.meta.visible).length>0?(l(),p(s,{key:0,index:n.item.path||n.item.meta.title},{title:a(()=>[n.item.meta.icon?(l(),p(h,{key:0},{default:a(()=>[u(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),m("span",null,y(n.item.meta.title),1)]),default:a(()=>[(l(!0),v(x,null,C(n.item.children,t=>(l(),p(o,{key:t.path,item:t},null,8,["item"]))),128))]),_:1},8,["index"])):(l(),p(e,{key:1,index:n.item.path,onClick:r[0]||(r[0]=t=>d(n.item.path))},{default:a(()=>[n.item.meta.icon?(l(),p(h,{key:0},{default:a(()=>[u(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):w("",!0),m("span",null,y(n.item.meta.title),1)]),_:1},8,["index"]))],64)):w("",!0)}}},ue=S({__name:"BreadCrumb",setup(n){const g=k(),d=D(),i=T([]),r=g.getRoutes();function f(){i.value=[];let o=d.matched;if(o[0].name=="layout"&&(o=o.slice(1)),o.length>0)for(let s=o.length-1;s>=0;s--){const e=o[s];let t=e.path;(s==o.length-1||e.children.length>0)&&(t=""),i.value.unshift({path:t,title:e.meta.title});const c=e.meta.parentPath||"";c&&i.value.unshift(...h(c))}}function h(o,s=[]){var t;const e=r.find(c=>c.path==o);return e&&e.meta&&typeof e.meta.title=="string"&&s.unshift({path:e.path||"",title:e.meta.title}),typeof((t=e==null?void 0:e.meta)==null?void 0:t.parentPath)=="string"?h(e.meta.parentPath,s):s}return U(()=>d.path,()=>{f()},{immediate:!0}),(o,s)=>{const e=H,t=G;return l(),p(t,null,{default:a(()=>[(l(!0),v(x,null,C(i.value,(c,E)=>(l(),p(e,{key:c.path+E,to:c.path},{default:a(()=>[L(y(c.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),re={class:"app-aside"},ie=S({name:"Layout"}),de=S({...ie,setup(n){const g=k(),d=D(),i=ne(),r=le(),f=I(()=>i.userInfo),h=I(()=>i.userMenus);function o(){r.menu.isExpand=!r.menu.isExpand}function s(){ae().finally(()=>{i.setLogout(),g.push("/login")})}return(e,t)=>{const c=P,E=W,N=b("arrow-down"),$=Y,V=X,A=J,F=ee,R=K,z=b("router-view");return l(),v(x,null,[m("div",{class:"app-head",style:M(`left: ${_(r).menu.isExpand?"210px":"64px"};`)},[u(c,{class:"menu-collapse",onClick:o},{default:a(()=>[(l(),p(Q(_(r).menu.isExpand?"Fold":"Expand")))]),_:1}),u(ue),u(A,{trigger:"hover"},{dropdown:a(()=>[u(V,null,{default:a(()=>[u($,{onClick:s},{default:a(()=>t[0]||(t[0]=[L("退出")])),_:1})]),_:1})]),default:a(()=>[m("div",null,[u(E,{src:f.value.avatar,size:32,icon:"UserFilled",shape:"circle",fit:"cover"},null,8,["src"]),m("span",null,y(f.value.userName),1),u(c,null,{default:a(()=>[u(N)]),_:1})])]),_:1})],4),m("div",re,[u(R,null,{default:a(()=>[m("div",{class:Z(["app-logo",_(r).menu.isExpand?"":"collapsed"])},t[1]||(t[1]=[m("img",{class:"app-logo-img",src:oe,alt:""},null,-1),m("span",null,"Vue3管理后台",-1)]),2),u(F,{collapse:!_(r).menu.isExpand,"unique-opened":!0,"default-active":_(d).meta.activePath||_(d).path||_(d).name},{default:a(()=>[(l(!0),v(x,null,C(h.value,B=>(l(),p(se,{key:B.path,item:B},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),m("div",{class:"app-main",style:M(`padding-left: ${_(r).menu.isExpand?"210px":"64px"};`)},[u(z,{class:"app-view"})],4)],64)}}});export{de as default};
