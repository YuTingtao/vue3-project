import{aF as be,b as ke,d as Z,ad as we,i as Q,e as Y,aG as ee,aH as ye,aI as xe,v as Ie,u as Ce,aJ as Ee,r as N,aK as he,aL as Ne,f as h,w as ae,Y as Re,y as Le,o as v,l as R,m as c,N as n,T as Te,A as d,s as p,k as a,n as te,aM as Oe,Z as ze,X as k,E as C,aN as Ve,j as A,$ as se,aO as $e,a7 as Se,aP as Ae,aQ as Pe,p as Me,aR as Xe,aS as Be,ao as Ye,aa as Fe,ab as De,q as He,_ as je,L as S,Q as T,aT as qe,t as Ge,aU as Je,aV as Ke,an as Ue,aq as We,R as Ze,al as z,ap as Qe}from"./index-DaDnXjmt.js";/* empty css               */import{E as ea}from"./index-eeEQj_IO.js";import{d as aa}from"./debounce-omfefv1X.js";import{_ as ta}from"./plugin-vue_export-helper-DlAUqK2U.js";var sa="Expected a function";function B(f,l,r){var _=!0,e=!0;if(typeof f!="function")throw new TypeError(sa);return be(r)&&(_="leading"in r?!!r.leading:_,e="trailing"in r?!!r.trailing:e),aa(f,l,{leading:_,maxWait:l,trailing:e})}const na=ke({urlList:{type:Z(Array),default:()=>we([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Z(String)}}),oa={close:()=>!0,switch:f=>Q(f),rotate:f=>Q(f)},la=Y({name:"ElImageViewer"}),ra=Y({...la,props:na,emits:oa,setup(f,{expose:l,emit:r}){var _;const e=f,w={CONTAIN:{name:"contain",icon:ee(ye)},ORIGINAL:{name:"original",icon:ee(xe)}},{t:y}=Ie(),o=Ce("image-viewer"),{nextZIndex:ne}=Ee(),P=N(),F=N([]),D=he(),L=N(!0),x=N(e.initialIndex),V=Ne(w.CONTAIN),i=N({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),oe=N((_=e.zIndex)!=null?_:ne()),le=h(()=>{const{urlList:t}=e;return t.length<=1}),H=h(()=>x.value===0),j=h(()=>x.value===e.urlList.length-1),re=h(()=>e.urlList[x.value]),ie=h(()=>[o.e("btn"),o.e("prev"),o.is("disabled",!e.infinite&&H.value)]),ue=h(()=>[o.e("btn"),o.e("next"),o.is("disabled",!e.infinite&&j.value)]),ce=h(()=>{const{scale:t,deg:u,offsetX:s,offsetY:m,enableTransition:g}=i.value;let b=s/t,I=m/t;const O=u*Math.PI/180,U=Math.cos(O),W=Math.sin(O);b=b*U+I*W,I=I*U-s/t*W;const X={transform:`scale(${t}) rotate(${u}deg) translate(${b}px, ${I}px)`,transition:g?"transform .3s":""};return V.value.name===w.CONTAIN.name&&(X.maxWidth=X.maxHeight="100%"),X});function $(){fe(),r("close")}function de(){const t=B(s=>{switch(s.code){case T.esc:e.closeOnPressEscape&&$();break;case T.space:G();break;case T.left:J();break;case T.up:E("zoomIn");break;case T.right:K();break;case T.down:E("zoomOut");break}}),u=B(s=>{const m=s.deltaY||s.deltaX;E(m<0?"zoomIn":"zoomOut",{zoomRate:e.zoomRate,enableTransition:!1})});D.run(()=>{S(document,"keydown",t),S(document,"wheel",u)})}function fe(){D.stop()}function me(){L.value=!1}function pe(t){L.value=!1,t.target.alt=y("el.image.error")}function ve(t){if(L.value||t.button!==0||!P.value)return;i.value.enableTransition=!1;const{offsetX:u,offsetY:s}=i.value,m=t.pageX,g=t.pageY,b=B(O=>{i.value={...i.value,offsetX:u+O.pageX-m,offsetY:s+O.pageY-g}}),I=S(document,"mousemove",b);S(document,"mouseup",()=>{I()}),t.preventDefault()}function q(){i.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function G(){if(L.value)return;const t=qe(w),u=Object.values(w),s=V.value.name,g=(u.findIndex(b=>b.name===s)+1)%t.length;V.value=w[t[g]],q()}function M(t){const u=e.urlList.length;x.value=(t+u)%u}function J(){H.value&&!e.infinite||M(x.value-1)}function K(){j.value&&!e.infinite||M(x.value+1)}function E(t,u={}){if(L.value)return;const{minScale:s,maxScale:m}=e,{zoomRate:g,rotateDeg:b,enableTransition:I}={zoomRate:e.zoomRate,rotateDeg:90,enableTransition:!0,...u};switch(t){case"zoomOut":i.value.scale>s&&(i.value.scale=Number.parseFloat((i.value.scale/g).toFixed(3)));break;case"zoomIn":i.value.scale<m&&(i.value.scale=Number.parseFloat((i.value.scale*g).toFixed(3)));break;case"clockwise":i.value.deg+=b,r("rotate",i.value.deg);break;case"anticlockwise":i.value.deg-=b,r("rotate",i.value.deg);break}i.value.enableTransition=I}function _e(t){var u;((u=t.detail)==null?void 0:u.focusReason)==="pointer"&&t.preventDefault()}function ge(){e.closeOnPressEscape&&$()}return ae(re,()=>{Re(()=>{const t=F.value[0];t!=null&&t.complete||(L.value=!0)})}),ae(x,t=>{q(),r("switch",t)}),Le(()=>{de()}),l({setActiveItem:M}),(t,u)=>(v(),R(a(ea),{to:"body",disabled:!t.teleported},{default:c(()=>[n(Te,{name:"viewer-fade",appear:""},{default:c(()=>[d("div",{ref_key:"wrapper",ref:P,tabindex:-1,class:p(a(o).e("wrapper")),style:te({zIndex:oe.value})},[n(a(Oe),{loop:"",trapped:"","focus-trap-el":P.value,"focus-start-el":"container",onFocusoutPrevented:_e,onReleaseRequested:ge},{default:c(()=>[d("div",{class:p(a(o).e("mask")),onClick:ze(s=>t.hideOnClickModal&&$(),["self"])},null,10,["onClick"]),k(" CLOSE "),d("span",{class:p([a(o).e("btn"),a(o).e("close")]),onClick:$},[n(a(C),null,{default:c(()=>[n(a(Ve))]),_:1})],2),k(" ARROW "),a(le)?k("v-if",!0):(v(),A(se,{key:0},[d("span",{class:p(a(ie)),onClick:J},[n(a(C),null,{default:c(()=>[n(a($e))]),_:1})],2),d("span",{class:p(a(ue)),onClick:K},[n(a(C),null,{default:c(()=>[n(a(Se))]),_:1})],2)],64)),k(" ACTIONS "),d("div",{class:p([a(o).e("btn"),a(o).e("actions")])},[d("div",{class:p(a(o).e("actions__inner"))},[n(a(C),{onClick:s=>E("zoomOut")},{default:c(()=>[n(a(Ae))]),_:1},8,["onClick"]),n(a(C),{onClick:s=>E("zoomIn")},{default:c(()=>[n(a(Pe))]),_:1},8,["onClick"]),d("i",{class:p(a(o).e("actions__divider"))},null,2),n(a(C),{onClick:G},{default:c(()=>[(v(),R(Me(a(V).icon)))]),_:1}),d("i",{class:p(a(o).e("actions__divider"))},null,2),n(a(C),{onClick:s=>E("anticlockwise")},{default:c(()=>[n(a(Xe))]),_:1},8,["onClick"]),n(a(C),{onClick:s=>E("clockwise")},{default:c(()=>[n(a(Be))]),_:1},8,["onClick"])],2)],2),k(" CANVAS "),d("div",{class:p(a(o).e("canvas"))},[(v(!0),A(se,null,Ye(t.urlList,(s,m)=>Fe((v(),A("img",{ref_for:!0,ref:g=>F.value[m]=g,key:s,src:s,style:te(a(ce)),class:p(a(o).e("img")),crossorigin:t.crossorigin,onLoad:me,onError:pe,onMousedown:ve},null,46,["src","crossorigin"])),[[De,m===x.value]])),128))],2),He(t.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var ia=je(ra,[["__file","image-viewer.vue"]]);const ua=Ge(ia),ca={__name:"ImgView",props:{modelValue:{type:Boolean,default:!1},urlList:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(f,{emit:l}){const r=l;return(_,e)=>{const w=ua;return f.modelValue?(v(),R(w,{key:0,"url-list":f.urlList,onClose:e[0]||(e[0]=y=>r("update:modelValue",!1))},null,8,["url-list"])):k("",!0)}}};function da(f){const l=document.createElement("div");l.classList.add("img-viewer-box"),document.body.append(l);const r=Je(ca,{modelValue:!0,urlList:f,"onUpdate:modelValue":_=>{_||(r.unmount(l),l.remove())}});r.mount(l)}const fa={class:"page-svg"},ma={class:"row-box"},pa={class:"row-box"},va={class:"row-box"},_a=Y({name:"BaseCase"}),ga=Object.assign(_a,{setup(f){Ue(),We();const{hasPermission:l}=Ke(),r=N(["https://img2.baidu.com/it/u=2193238619,3962578777&fm=253&fmt=auto&app=120&f=JPEG?w=1067&h=800","https://img0.baidu.com/it/u=2099628,2438611947&fm=253&fmt=auto&app=138&f=JPEG?w=755&h=500"]);return(_,e)=>{const w=Qe,y=Ze;return v(),A("div",fa,[d("div",ma,[e[1]||(e[1]=d("span",null,"svg-icon：",-1)),n(w,{name:"edit"})]),d("div",pa,[e[6]||(e[6]=d("span",null,"按钮权限：",-1)),a(l)("add")?(v(),R(y,{key:0,type:"primary"},{default:c(()=>e[2]||(e[2]=[z("新增")])),_:1})):k("",!0),a(l)("edit")?(v(),R(y,{key:1,type:"primary"},{default:c(()=>e[3]||(e[3]=[z("编辑")])),_:1})):k("",!0),a(l)("delete")?(v(),R(y,{key:2,type:"primary"},{default:c(()=>e[4]||(e[4]=[z("删除")])),_:1})):k("",!0),a(l)("export")?(v(),R(y,{key:3,type:"primary"},{default:c(()=>e[5]||(e[5]=[z("导出")])),_:1})):k("",!0)]),d("div",va,[e[8]||(e[8]=d("span",null,"图片预览：",-1)),n(y,{type:"primary",onClick:e[0]||(e[0]=o=>a(da)(r.value))},{default:c(()=>e[7]||(e[7]=[z("预览")])),_:1})])])}}}),Ia=ta(ga,[["__scopeId","data-v-934a6e9a"]]);export{Ia as default};
