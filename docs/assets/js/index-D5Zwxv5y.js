import{b as j,c as q,d as T,e as F,f as J,g as O,h as U,i as W,j as X,k as Y,l as Z}from"./element-plus-BBMzEW1d.js";import{_ as M,u as G}from"./index-Cjj2p4dW.js";import{be as H,bk as y,aD as P,o as v,V as k,q as u,Z as _,_ as o,W as x,aw as w,X as c,a0 as s,a2 as b,n as S,r as K,J as Q,bl as V,ao as $,c as B,u as d,a3 as I,Y as ee}from"./vendor-D-cnfIL5.js";import{l as te}from"./login-DP1ClhZW.js";const ne=""+new URL("../png/logo-7oke29fp.png",import.meta.url).href,ae=H("appStore",{state:()=>({menu:{isExpand:!0}}),getters:{},actions:{},persist:{key:"appStore",storage:localStorage}}),oe={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(n){const g=y();function p(m){g.push(m)}return(m,r)=>{const f=M,h=j,a=P("MenuItem",!0),l=q,e=T;return n.item.meta.visible?(u(),v(x,{key:0},[n.item.children&&n.item.children.filter(t=>t.meta.visible).length>0?(u(),_(l,{key:0,index:n.item.path||n.item.meta.title},{title:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):k("",!0),c("span",null,b(n.item.meta.title),1)]),default:o(()=>[(u(!0),v(x,null,w(n.item.children,t=>(u(),_(a,{key:t.path,item:t},null,8,["item"]))),128))]),_:1},8,["index"])):(u(),_(e,{key:1,index:n.item.path,onClick:r[0]||(r[0]=t=>p(n.item.path))},{default:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):k("",!0),c("span",null,b(n.item.meta.title),1)]),_:1},8,["index"]))],64)):k("",!0)}}},le=S({__name:"BreadCrumb",setup(n){const g=y(),p=V(),m=K([]),r=g.getRoutes();function f(){m.value=[];let a=p.matched;if(a[0].path==="/"&&(a=a.slice(1)),a.length>0)for(let l=a.length-1;l>=0;l--){const e=a[l];let t=e.path;(l==a.length-1||e.children.length>0)&&(t=""),m.value.unshift({path:t,title:e.meta.title});const i=e.meta.parentPath||"";i&&m.value.unshift(...h(i))}}function h(a,l=[]){var t;const e=r.find(i=>i.path==a);return e&&e.meta&&typeof e.meta.title=="string"&&l.unshift({path:e.path||"",title:e.meta.title}),typeof((t=e==null?void 0:e.meta)==null?void 0:t.parentPath)=="string"?h(e.meta.parentPath,l):l}return Q(()=>p.path,()=>{f()},{immediate:!0}),(a,l)=>{const e=J,t=F;return u(),_(t,null,{default:o(()=>[(u(!0),v(x,null,w(m.value,(i,E)=>(u(),_(e,{key:i.path+E,to:i.path},{default:o(()=>[$(b(i.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),se={class:"app-avatar-dropdown"},ue={class:"app-aside"},re=S({name:"Layout"}),de=S({...re,setup(n){const g=y(),p=V(),m=G(),r=ae(),f=B(()=>m.userInfo),h=B(()=>m.userMenus);function a(){r.menu.isExpand=!r.menu.isExpand}function l(){te.logout().finally(()=>{m.setLogout(),g.push("/login")})}return(e,t)=>{const i=M,E=W,D=Y,L=X,N=O,R=Z,z=U,A=P("router-view");return u(),v(x,null,[c("div",{class:"app-head",style:I(`left: ${d(r).menu.isExpand?"210px":"64px"};`)},[s(i,{class:"menu-collapse",name:d(r).menu.isExpand?"fold":"expand",onClick:a},null,8,["name"]),s(le),s(N,{trigger:"hover"},{dropdown:o(()=>[s(L,null,{default:o(()=>[s(D,{onClick:l},{default:o(()=>t[0]||(t[0]=[$("退出")])),_:1,__:[0]})]),_:1})]),default:o(()=>[c("div",se,[s(E,{src:f.value.avatar,size:32},{default:o(()=>[s(i,{name:"avatar"})]),_:1},8,["src"]),c("span",null,b(f.value.userName),1),s(i,{name:"arrow-down"})])]),_:1})],4),c("div",ue,[s(z,null,{default:o(()=>[c("div",{class:ee(["app-logo",d(r).menu.isExpand?"":"collapsed"])},t[1]||(t[1]=[c("img",{class:"app-logo-img",src:ne,alt:""},null,-1),c("span",null,"Vue3管理后台",-1)]),2),s(R,{collapse:!d(r).menu.isExpand,"unique-opened":!0,"default-active":d(p).meta.activePath||d(p).path||d(p).name},{default:o(()=>[(u(!0),v(x,null,w(h.value,C=>(u(),_(oe,{key:C.path,item:C},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),c("div",{class:"app-main",style:I(`padding-left: ${d(r).menu.isExpand?"210px":"64px"};`)},[s(A,{class:"app-view"})],4)],64)}}});export{de as default};
