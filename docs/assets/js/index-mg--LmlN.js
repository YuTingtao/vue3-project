import{b as j,c as q,d as T,e as F,f as J,g as O,h as W,i as X,j as Y,k as Z,l as G}from"./element-plus-BBMzEW1d.js";import{_ as M,u as H}from"./index-BA9F4KaS.js";import{be as K,bk as y,aD as P,o as v,V as k,q as u,Z as _,_ as o,W as x,aw as w,X as m,a0 as s,a2 as b,n as S,r as Q,J as U,bl as V,ao as $,c as B,u as d,a3 as I,Y as ee}from"./vendor-D-cnfIL5.js";import{l as te}from"./login-RHEwRQd2.js";const ne="/assets/png/logo-7oke29fp.png",ae=K("appStore",{state:()=>({menu:{isExpand:!0}}),getters:{},actions:{},persist:{key:"appStore",storage:localStorage}}),oe={__name:"MenuItem",props:{item:{type:Object,default:()=>{}}},setup(n){const g=y();function p(c){g.push(c)}return(c,r)=>{const f=M,h=j,a=P("MenuItem",!0),l=q,e=T;return n.item.meta.visible?(u(),v(x,{key:0},[n.item.children&&n.item.children.filter(t=>t.meta.visible).length>0?(u(),_(l,{key:0,index:n.item.path||n.item.meta.title},{title:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):k("",!0),m("span",null,b(n.item.meta.title),1)]),default:o(()=>[(u(!0),v(x,null,w(n.item.children,t=>(u(),_(a,{key:t.path,item:t},null,8,["item"]))),128))]),_:1},8,["index"])):(u(),_(e,{key:1,index:n.item.path,onClick:r[0]||(r[0]=t=>p(n.item.path))},{default:o(()=>[n.item.meta.icon?(u(),_(h,{key:0},{default:o(()=>[s(f,{name:n.item.meta.icon},null,8,["name"])]),_:1})):k("",!0),m("span",null,b(n.item.meta.title),1)]),_:1},8,["index"]))],64)):k("",!0)}}},le=S({__name:"BreadCrumb",setup(n){const g=y(),p=V(),c=Q([]),r=g.getRoutes();function f(){c.value=[];let a=p.matched;if(a[0].path==="/"&&(a=a.slice(1)),a.length>0)for(let l=a.length-1;l>=0;l--){const e=a[l];let t=e.path;(l==a.length-1||e.children.length>0)&&(t=""),c.value.unshift({path:t,title:e.meta.title});const i=e.meta.parentPath||"";i&&c.value.unshift(...h(i))}}function h(a,l=[]){var t;const e=r.find(i=>i.path==a);return e&&e.meta&&typeof e.meta.title=="string"&&l.unshift({path:e.path||"",title:e.meta.title}),typeof((t=e==null?void 0:e.meta)==null?void 0:t.parentPath)=="string"?h(e.meta.parentPath,l):l}return U(()=>p.path,()=>{f()},{immediate:!0}),(a,l)=>{const e=J,t=F;return u(),_(t,null,{default:o(()=>[(u(!0),v(x,null,w(c.value,(i,E)=>(u(),_(e,{key:i.path+E,to:i.path},{default:o(()=>[$(b(i.title),1)]),_:2},1032,["to"]))),128))]),_:1})}}}),se={class:"app-avatar-dropdown"},ue={class:"app-aside"},re=S({name:"Layout"}),de=S({...re,setup(n){const g=y(),p=V(),c=H(),r=ae(),f=B(()=>c.userInfo),h=B(()=>c.userMenus);function a(){r.menu.isExpand=!r.menu.isExpand}function l(){te.logout().finally(()=>{c.setLogout(),g.push("/login")})}return(e,t)=>{const i=M,E=X,D=Z,N=Y,L=O,z=G,A=W,R=P("router-view");return u(),v(x,null,[m("div",{class:"app-head",style:I(`left: ${d(r).menu.isExpand?"210px":"64px"};`)},[s(i,{class:"menu-collapse",name:d(r).menu.isExpand?"fold":"expand",onClick:a},null,8,["name"]),s(le),s(L,{trigger:"hover"},{dropdown:o(()=>[s(N,null,{default:o(()=>[s(D,{onClick:l},{default:o(()=>t[0]||(t[0]=[$("退出")])),_:1,__:[0]})]),_:1})]),default:o(()=>[m("div",se,[s(E,{src:f.value.avatar,size:32},{default:o(()=>[s(i,{name:"avatar"})]),_:1},8,["src"]),m("span",null,b(f.value.userName),1),s(i,{name:"arrow-down"})])]),_:1})],4),m("div",ue,[s(A,null,{default:o(()=>[m("div",{class:ee(["app-logo",d(r).menu.isExpand?"":"collapsed"])},t[1]||(t[1]=[m("img",{class:"app-logo-img",src:ne,alt:""},null,-1),m("span",null,"Vue3管理后台",-1)]),2),s(z,{collapse:!d(r).menu.isExpand,"unique-opened":!0,"default-active":d(p).meta.activePath||d(p).path||d(p).name},{default:o(()=>[(u(!0),v(x,null,w(h.value,C=>(u(),_(oe,{key:C.path,item:C},null,8,["item"]))),128))]),_:1},8,["collapse","default-active"])]),_:1})]),m("div",{class:"app-main",style:I(`padding-left: ${d(r).menu.isExpand?"210px":"64px"};`)},[s(R,{class:"app-view"})],4)],64)}}});export{de as default};
