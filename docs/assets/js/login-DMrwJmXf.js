import{W as u,X as i}from"./vender-DjXCCsC3.js";import{u as s,r as a}from"./index-Br12Df8g.js";function o(e){i.error({message:e,duration:2e3,grouping:!0})}function n(){const e=a.currentRoute;let t="/login";e.value.path!="/login"&&(t=`/login?redirect=${e.value.fullPath}`),a.push(t)}const r=u.create({baseURL:""});r.interceptors.request.use(e=>{const t=s();return e.headers["Content-Type"]="application/json",t.token&&(e.headers.token=t.token),e},e=>Promise.reject(e));r.interceptors.response.use(e=>{const t=s();return e.status===200?e.data instanceof Blob||e.data instanceof ArrayBuffer?e:(e.data.code!==200&&o(e.data.msg),e.data.code===401&&(t.setLogout(),n()),e.data):Promise.reject(e.data)},e=>{const t=s();if(e.response)switch(e.response.status){case 401:o("登录过期，请重新登录"),t.setLogout(),n();break;case 404:o("接口地址不存在");break;default:o("服务器异常")}else navigator.onLine||o("网络异常，请检查您的网络");return Promise.reject(e)});const p={login(e){return r.request({url:"/api/user/login",method:"post",data:e})},logout(){return r.request({url:"/api/user/logout",method:"get",timeout:500})}};export{p as l};
