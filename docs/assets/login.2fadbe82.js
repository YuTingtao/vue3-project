import{X as n,Y as s,Z as a}from"./index.8a37c365.js";import{ag as u}from"./vendors.d1fe43db.js";function r(e){s.closeAll(),s.error({message:e,duration:2e3})}function i(){const e=a.currentRoute;let t="/login";e.value.path!="/login"&&(t=`/login?redirect=${e.value.fullPath}`),a.push(t)}const o=u.create({timeout:1e4});o.interceptors.request.use(e=>{const t=n();return e.headers["Content-Type"]="application/json",t.token&&(e.headers.token=t.token),e},e=>Promise.error(e));o.interceptors.response.use(e=>{const t=n();return e.status===200?e.data instanceof Blob||e.data instanceof ArrayBuffer?e:(e.data.code!="000000"&&r(e.data.msg),e.data.code=="000001"&&(t.setLogout(),i()),e.data):Promise.reject(e)},e=>{if(e.response){switch(e.response.status){case 404:r("\u7F51\u7EDC\u8BF7\u6C42\u4E0D\u5B58\u5728");break;default:r("\u7F51\u7EDC\u8BF7\u6C42\u9519\u8BEF")}return Promise.reject(e)}else navigator.onLine||r("\u7F51\u7EDC\u5DF2\u65AD\u5F00\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC")});const p={login(e){return o.request({url:"/api/user/login",method:"post",data:e,timeout:500})},logout(){return o.request({url:"/api/user/logout",method:"get"})},userMenus(){return o.request({url:"/api/user/userMenus",method:"get"})}};export{p as l};
